{"version":3,"sources":["webpack:///webpack/bootstrap bd5bfcd3be4a3461d5f4","webpack:///./src/index.js","webpack:///./~/aframe-rounded/dist/aframe-rounded-component.min.js","webpack:///./src/fade/index.js","webpack:///./src/core/event.js","webpack:///./src/keyboard/index.js","webpack:///./src/utils.js","webpack:///./src/keyboard/assets.js","webpack:///./src/keyboard/draw.js","webpack:///./src/keyboard/layouts.js","webpack:///./src/keyboard/config.js","webpack:///./src/keyboard/behaviors.js","webpack:///./src/keyboard/sfx.js","webpack:///./src/input/index.js","webpack:///./src/button/index.js","webpack:///./src/button/assets.js","webpack:///./src/button/sfx.js"],"names":["AFRAME","console","error","ASSETS_PATH","require","Event","opacityUpdate","opacity","el","object3D","traverse","o","material","transparent","textEntities","text","setAttribute","registerComponent","schema","duration","type","default","init","querySelectorAll","start","tick","t","Math","min","data","removeAttribute","emit","module","exports","name","dispatchEvent","CustomEvent","detail","Utils","Assets","Draw","Behaviors","SFX","isOpen","physicalKeyboard","currentInput","that","preloadAssets","numericalUI","mainUI","actionsUI","alphabeticalLayout","symbolsLayout","appendChild","numericalLayout","actionsLayout","show","showKeyboard","hide","hideKeyboard","open","openKeyboard","dismiss","dismissKeyboard","destroy","destroyKeyboard","addEventListener","inputEvent","bind","backspaceEvent","dismissEvent","document","keydownEvent","body","didFocusInputEvent","didBlurInputEvent","update","remove","removeEventListener","pause","play","e","appendString","deleteLast","blur","preventDefault","stopImmediatePropagation","stopPropagation","key","length","registerPrimitive","defaultComponents","keyboard","mappings","assets_arr","assets","querySelector","already_exists","scene","createElement","item","children","stuff","id","asset_item","src","extend","a","b","hasOwnProperty","clone","original","Array","isArray","slice","Object","create","getPrototypeOf","i","undefined","keys","getOwnPropertyNames","defineProperty","getOwnPropertyDescriptor","updateOpacity","hasAttribute","props","getAttribute","getWidthFactor","wrapCount","widthFactor","components","currentFont","Layouts","Config","wrapper","KEYBOARD_COLOR","numerical","index_y","key_id","value","index_x","x","KEY_WIDTH","y","alphabetical","prev_was_space","SPACE_KEY_WIDTH","symbols","actions","val_y","ACTION_WIDTH","addKeyEvents","shadow_el","letter_el","SPACE_KEY_HEIGHT","icon_el","shiftKey","circle_el","KEY_COLOR_HIGHLIGHT","KEY_COLOR_ACTIVE","SPACEBAR_COLOR_ACTIVE","SPACEBAR_COLOR_HIGHLIGHT","o_position","child","parent","parentNode","sceneEl","position","removeChild","_transitioning","animationend","setTimeout","keyClick","keyDown","keyOut","keyIn","isShiftEnabled","toUpperCase","shiftToggle","isSymbols","symbolsToggle","z","keyEl","key_type","startsWith","textEl","toLowerCase","sound","stopSound","playSound","disabled","color","align","font","letterSpacing","lineHeight","side","tabSize","placeholder","placeholderColor","maxLength","width","cursorWidth","cursorHeight","cursorColor","backgroundColor","backgroundOpacity","background","cursor","focus","blink","input","get","set","enumerable","configurable","isFocused","clearInterval","cursorInterval","setInterval","noemit","str","updateText","padding","left","right","attr","cursorTimer","clearTimeout","substring","repeat","getTextWidth","trimFirst","_widthFactor","v","geometry","visibleGlyphs","line","substr","textRatio","placeholder_props","updateCursor","buttonColor","shadow","outline","label","button","onClick","clickDisabled","click","getWidth","__width","callback","timer"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;;;;;;;;ACtCA,EAAC,YAAI;AACH,OAAI,CAACA,MAAL,EAAa;AAAE,YAAOC,QAAQC,KAAR,CAAc,qBAAd,CAAP;AAA8C;AAC7D,OAAI,CAACF,OAAOG,WAAZ,EAAyB;AAAEH,YAAOG,WAAP,GAAqB,UAArB;AAAkC;AAC7DC,GAAA,mBAAAA,CAAQ,CAAR;AACAA,GAAA,mBAAAA,CAAQ,CAAR;AACA;AACAA,GAAA,mBAAAA,CAAQ,CAAR;AACAA,GAAA,mBAAAA,CAAQ,EAAR;AACA;AACA;AACA;AACD;AACCA,GAAA,mBAAAA,CAAQ,EAAR;AACD;AACA,EAdD,I;;;;;;ACAA,cAAa,cAAc,4BAA4B,YAAY,UAAU,iBAAiB,gEAAgE,SAAS,+BAA+B,gBAAgB,oCAAoC,QAAQ,SAAS,WAAW,QAAQ,wBAAwB,SAAS,wBAAwB,SAAS,yBAAyB,gBAAgB,yBAAyB,iBAAiB,yBAAyB,mBAAmB,yBAAyB,oBAAoB,yBAAyB,QAAQ,+BAA+B,UAAU,yBAAyB,iBAAiB,qEAAqE,6DAA6D,iEAAiE,mBAAmB,sMAAsM,0BAA0B,oOAAoO,kBAAkB,mBAAmB,wEAAwE,iBAAiB,8BAA8B,gRAAgR,8FAA8F,sWAAsW,mBAAmB,mBAAmB,wCAAwC,mBAAmB,WAAW,WAAW,yUAAyU,EAAE,G;;;;;;;;ACA5kF,KAAMC,QAAQ,mBAAAD,CAAQ,CAAR,CAAd;;AAEA,KAAIE,gBAAgB,SAAhBA,aAAgB,CAASC,OAAT,EAAkB;AACpC,QAAKC,EAAL,CAAQC,QAAR,CAAiBC,QAAjB,CAA0B,UAAUC,CAAV,EAAa;AACrC,SAAIA,EAAEC,QAAN,EAAgB;AACdD,SAAEC,QAAF,CAAWC,WAAX,GAAyB,IAAzB;AACAF,SAAEC,QAAF,CAAWL,OAAX,GAAqBA,OAArB;AACD;AACF,IALD;AADoC;AAAA;AAAA;;AAAA;AAOpC,0BAAiB,KAAKO,YAAtB,8HAAoC;AAAA,WAA3BC,IAA2B;;AAClCA,YAAKC,YAAL,CAAkB,SAAlB,EAA6BT,OAA7B;AACD;AATmC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUrC,EAVD;;AAYA;AACA;;AAEAP,QAAOiB,iBAAP,CAAyB,QAAzB,EAAmC;AACjCC,WAAQ;AACNC,eAAU,EAAEC,MAAM,KAAR,EAAeC,SAAS,GAAxB;AADJ,IADyB;AAIjCC,SAAM,gBAAW;AACf,UAAKR,YAAL,GAAoB,KAAKN,EAAL,CAAQe,gBAAR,CAAyB,QAAzB,CAApB;AACA,UAAKjB,aAAL,CAAmB,CAAnB;AACA,UAAKkB,KAAL,GAAa,IAAb;AACD,IARgC;AASjCC,SAAM,cAAUC,CAAV,EAAa;AACjB,SAAI,CAAC,KAAKF,KAAV,EAAiB;AAAE,YAAKA,KAAL,GAAaE,CAAb;AAAiB;AACpC,SAAInB,UAAUoB,KAAKC,GAAL,CAAS,CAACF,IAAI,KAAKF,KAAV,IAAmB,KAAKK,IAAL,CAAUV,QAAtC,EAAgD,CAAhD,CAAd;AACA,UAAKb,aAAL,CAAmBC,OAAnB;AACA,SAAIA,YAAY,CAAhB,EAAmB;AACjB,YAAKC,EAAL,CAAQsB,eAAR,CAAwB,QAAxB;AACAzB,aAAM0B,IAAN,CAAW,KAAKvB,EAAhB,EAAoB,cAApB;AACD;AACF,IAjBgC;AAkBjCF,kBAAeA;AAlBkB,EAAnC;;AAqBA;AACA;;AAEAN,QAAOiB,iBAAP,CAAyB,SAAzB,EAAoC;AAClCC,WAAQ;AACNC,eAAU,EAAEC,MAAM,KAAR,EAAeC,SAAS,GAAxB;AADJ,IAD0B;AAIlCC,SAAM,gBAAW;AACf,UAAKR,YAAL,GAAoB,KAAKN,EAAL,CAAQe,gBAAR,CAAyB,QAAzB,CAApB;AACA,UAAKjB,aAAL,CAAmB,CAAnB;AACA,UAAKkB,KAAL,GAAa,IAAb;AACD,IARiC;AASlCC,SAAM,cAAUC,CAAV,EAAa;AACjB,SAAI,CAAC,KAAKF,KAAV,EAAiB;AAAE,YAAKA,KAAL,GAAaE,CAAb;AAAiB;AACpC,SAAInB,UAAU,IAAEoB,KAAKC,GAAL,CAAS,CAACF,IAAI,KAAKF,KAAV,IAAmB,KAAKK,IAAL,CAAUV,QAAtC,EAAgD,CAAhD,CAAhB;AACA,UAAKb,aAAL,CAAmBC,OAAnB;AACA,SAAIA,YAAY,CAAhB,EAAmB;AACjB,YAAKC,EAAL,CAAQsB,eAAR,CAAwB,SAAxB;AACAzB,aAAM0B,IAAN,CAAW,KAAKvB,EAAhB,EAAoB,cAApB;AACD;AACF,IAjBiC;AAkBlCF,kBAAeA;AAlBmB,EAApC;;AAqBA;AACA;;AAEAN,QAAOiB,iBAAP,CAAyB,MAAzB,EAAiC;AAC/BK,SAAM,gBAAW;AACf,UAAKR,YAAL,GAAoB,KAAKN,EAAL,CAAQe,gBAAR,CAAyB,QAAzB,CAApB;AACA,UAAKjB,aAAL,CAAmB,CAAnB;AACA,UAAKE,EAAL,CAAQsB,eAAR,CAAwB,MAAxB;AACD,IAL8B;AAM/BxB,kBAAeA;AANgB,EAAjC;;AASA;AACA;;AAEAN,QAAOiB,iBAAP,CAAyB,MAAzB,EAAiC;AAC/BK,SAAM,gBAAW;AACf,UAAKR,YAAL,GAAoB,KAAKN,EAAL,CAAQe,gBAAR,CAAyB,QAAzB,CAApB;AACA,UAAKjB,aAAL,CAAmB,CAAnB;AACA,UAAKE,EAAL,CAAQsB,eAAR,CAAwB,MAAxB;AACD,IAL8B;AAM/BxB,kBAAeA;AANgB,EAAjC,E;;;;;;;;AC7EA0B,QAAOC,OAAP,GAAiB;AACfF,SAAM,cAACvB,EAAD,EAAK0B,IAAL,EAAWL,IAAX,EAAmB;AACvBrB,QAAG2B,aAAH,CAAkB,IAAIC,WAAJ,CAAgBF,IAAhB,EAAsB,EAACG,QAAQR,IAAT,EAAtB,CAAlB;AACD;AAHc,EAAjB,C;;;;;;;;ACAA,KAAMS,QAAQ,mBAAAlC,CAAQ,CAAR,CAAd;AACA,KAAMmC,SAAS,mBAAAnC,CAAQ,CAAR,CAAf;AACA,KAAMoC,OAAO,mBAAApC,CAAQ,CAAR,CAAb;AACA,KAAMqC,YAAY,mBAAArC,CAAQ,EAAR,CAAlB;AACA,KAAMsC,MAAM,mBAAAtC,CAAQ,EAAR,CAAZ;AACA,KAAMC,QAAQ,mBAAAD,CAAQ,CAAR,CAAd;;AAEAJ,QAAOiB,iBAAP,CAAyB,UAAzB,EAAqC;AACpCC,UAAQ;AACPyB,WAAQ,EAACvB,MAAM,SAAP,EAAkBC,SAAS,KAA3B,EADD;AAEPuB,qBAAkB,EAACxB,MAAM,SAAP,EAAkBC,SAAS,KAA3B;AAFX,GAD4B;AAKpCwB,gBAAc,IALsB;AAMpCvB,QAAM,gBAAY;AACjB,OAAIwB,OAAO,IAAX;;AAEA;AACAR,SAAMS,aAAN,CAAoBR,MAApB;;AAEA;AACAG,OAAIpB,IAAJ,CAAS,KAAKd,EAAd;;AAEA;AACAgC,QAAKlB,IAAL,CAAU,KAAKd,EAAf;;AAEA;AACA,OAAIwC,cAAcR,KAAKQ,WAAL,EAAlB;AAAA,OACCC,SAAST,KAAKS,MAAL,EADV;AAAA,OAECC,YAAYV,KAAKU,SAAL,EAFb;;AAIA;AACA,QAAK1C,EAAL,CAAQ2C,kBAAR,GAA6BX,KAAKW,kBAAL,EAA7B;AACA,QAAK3C,EAAL,CAAQ4C,aAAR,GAAwBZ,KAAKY,aAAL,EAAxB;;AAEA;AACAJ,eAAYK,WAAZ,CAAwBb,KAAKc,eAAL,EAAxB;AACAL,UAAOI,WAAP,CAAmB,KAAK7C,EAAL,CAAQ2C,kBAA3B;AACAD,aAAUG,WAAV,CAAsBb,KAAKe,aAAL,EAAtB;;AAEA,QAAK/C,EAAL,CAAQ6C,WAAR,CAAoBL,WAApB;AACA,QAAKxC,EAAL,CAAQ6C,WAAR,CAAoBJ,MAApB;AACA,QAAKzC,EAAL,CAAQ6C,WAAR,CAAoBH,SAApB;;AAEA;AACA,QAAK1C,EAAL,CAAQgD,IAAR,GAAe,YAAY;AAC1Bf,cAAUgB,YAAV,CAAuBX,KAAKtC,EAA5B;AACA,IAFD;AAGA,QAAKA,EAAL,CAAQkD,IAAR,GAAe,YAAY;AAC1BjB,cAAUkB,YAAV,CAAuBb,KAAKtC,EAA5B;AACA,IAFD;AAGA,QAAKA,EAAL,CAAQoD,IAAR,GAAe,YAAY;AAC1BnB,cAAUoB,YAAV,CAAuBf,KAAKtC,EAA5B;AACA,IAFD;AAGA,QAAKA,EAAL,CAAQsD,OAAR,GAAkB,YAAY;AAC7BrB,cAAUsB,eAAV,CAA0BjB,KAAKtC,EAA/B;AACA,IAFD;AAGA,QAAKA,EAAL,CAAQwD,OAAR,GAAkB,YAAY;AAC7BvB,cAAUwB,eAAV,CAA0BnB,KAAKtC,EAA/B;AACA,IAFD;;AAIA;AACA,QAAKA,EAAL,CAAQQ,YAAR,CAAqB,OAArB,EAA8B,OAA9B;AACA,QAAKR,EAAL,CAAQQ,YAAR,CAAqB,UAArB,EAAiC,SAAjC;AACA,QAAKR,EAAL,CAAQQ,YAAR,CAAqB,UAArB,EAAiC,cAAjC;;AAEA;AACA,QAAKR,EAAL,CAAQ0D,gBAAR,CAAyB,OAAzB,EAAkC,KAAKC,UAAL,CAAgBC,IAAhB,CAAqB,IAArB,CAAlC;AACA,QAAK5D,EAAL,CAAQ0D,gBAAR,CAAyB,WAAzB,EAAsC,KAAKG,cAAL,CAAoBD,IAApB,CAAyB,IAAzB,CAAtC;AACA,QAAK5D,EAAL,CAAQ0D,gBAAR,CAAyB,SAAzB,EAAoC,KAAKI,YAAL,CAAkBF,IAAlB,CAAuB,IAAvB,CAApC;;AAEA;AACAG,YAASL,gBAAT,CAA0B,SAA1B,EAAqC,KAAKM,YAAL,CAAkBJ,IAAlB,CAAuB,IAAvB,CAArC;AACAG,YAASE,IAAT,CAAcP,gBAAd,CAA+B,eAA/B,EAAgD,KAAKQ,kBAAL,CAAwBN,IAAxB,CAA6B,IAA7B,CAAhD;AACAG,YAASE,IAAT,CAAcP,gBAAd,CAA+B,cAA/B,EAA+C,KAAKS,iBAAL,CAAuBP,IAAvB,CAA4B,IAA5B,CAA/C;AACA,GAnEmC;AAoEpCQ,UAAQ,kBAAY;AACnB,OAAI,KAAK/C,IAAL,CAAUc,MAAd,EAAsB;AACrBF,cAAUgB,YAAV,CAAuB,KAAKjD,EAA5B;AACA,IAFD,MAEO;AACNiC,cAAUkB,YAAV,CAAuB,KAAKnD,EAA5B;AACA;AACD,GA1EmC;AA2EpCiB,QAAM,gBAAY,CACjB,CA5EmC;AA6EpCoD,UAAQ,kBAAY;AACnB,QAAKrE,EAAL,CAAQsE,mBAAR,CAA4B,OAA5B,EAAqC,KAAKX,UAAL,CAAgBC,IAAhB,CAAqB,IAArB,CAArC;AACA,QAAK5D,EAAL,CAAQsE,mBAAR,CAA4B,WAA5B,EAAyC,KAAKT,cAAL,CAAoBD,IAApB,CAAyB,IAAzB,CAAzC;AACA,QAAK5D,EAAL,CAAQsE,mBAAR,CAA4B,SAA5B,EAAuC,KAAKR,YAAL,CAAkBF,IAAlB,CAAuB,IAAvB,CAAvC;;AAEAG,YAASO,mBAAT,CAA6B,SAA7B,EAAwC,KAAKN,YAAL,CAAkBJ,IAAlB,CAAuB,IAAvB,CAAxC;AACAG,YAASE,IAAT,CAAcK,mBAAd,CAAkC,eAAlC,EAAmD,KAAKJ,kBAAL,CAAwBN,IAAxB,CAA6B,IAA7B,CAAnD;AACAG,YAASE,IAAT,CAAcK,mBAAd,CAAkC,cAAlC,EAAkD,KAAKH,iBAAL,CAAuBP,IAAvB,CAA4B,IAA5B,CAAlD;AACA,GArFmC;AAsFpCW,SAAO,iBAAY,CAClB,CAvFmC;AAwFpCC,QAAM,gBAAY,CACjB,CAzFmC;;AA2FpC;AACAb,cAAY,oBAAUc,CAAV,EAAa;AACxB;AACA,OAAI,KAAKpC,YAAT,EAAuB;AACtB,SAAKA,YAAL,CAAkBqC,YAAlB,CAA+BD,EAAE5C,MAAjC;AACA;AACD,GAjGmC;;AAmGpC;AACAgC,kBAAgB,wBAAUY,CAAV,EAAa;AAC5B,OAAI,KAAKpC,YAAT,EAAuB;AACtB,SAAKA,YAAL,CAAkBsC,UAAlB;AACA;AACD,GAxGmC;;AA0GpCb,gBAAc,sBAAUW,CAAV,EAAa;AAC1B,OAAI,KAAKpC,YAAT,EAAuB;AACtB,SAAKA,YAAL,CAAkBuC,IAAlB;AACA;AACD,GA9GmC;;AAgHpC;AACAZ,gBAAc,sBAAUS,CAAV,EAAa;AAC1B,OAAI,KAAKpC,YAAL,IAAqB,KAAKhB,IAAL,CAAUe,gBAAnC,EAAqD;AACpDqC,MAAEI,cAAF;AACAJ,MAAEK,wBAAF;AACAL,MAAEM,eAAF;AACA;AACA,QAAIN,EAAEO,GAAF,KAAU,OAAd,EAAuB;AACtBnF,WAAM0B,IAAN,CAAWU,UAAUjC,EAArB,EAAyB,OAAzB,EAAkC,IAAlC;AACAH,WAAM0B,IAAN,CAAWU,UAAUjC,EAArB,EAAyB,OAAzB,EAAkC,IAAlC;AACA,KAHD,MAIK,IAAIyE,EAAEO,GAAF,KAAU,WAAd,EAA2B;AAC/BnF,WAAM0B,IAAN,CAAWU,UAAUjC,EAArB,EAAyB,WAAzB;AACA,KAFI,MAGA,IAAIyE,EAAEO,GAAF,KAAU,QAAd,EAAwB;AAC5BnF,WAAM0B,IAAN,CAAWU,UAAUjC,EAArB,EAAyB,SAAzB;AACA,KAFI,MAGA,IAAIyE,EAAEO,GAAF,CAAMC,MAAN,GAAe,CAAnB,EAAsB;AAC1BpF,WAAM0B,IAAN,CAAWU,UAAUjC,EAArB,EAAyB,OAAzB,EAAkCyE,EAAEO,GAApC;AACA;AACD;AACD,GArImC;;AAuIpC;AACAd,sBAAoB,4BAAUO,CAAV,EAAa;AAChC,OAAI,KAAKpC,YAAT,EAAuB;AACtB,SAAKA,YAAL,CAAkBuC,IAAlB,CAAuB,IAAvB;AACA;AACD,QAAKvC,YAAL,GAAoBoC,EAAE5C,MAAtB;AACA,OAAI,CAAC,KAAK7B,EAAL,CAAQmC,MAAb,EAAqB;AACpBF,cAAUoB,YAAV,CAAuB,KAAKrD,EAA5B;AACA;AACD,GAhJmC;;AAkJpC;AACAmE,qBAAmB,2BAAUM,CAAV,EAAa;AAC/B,QAAKpC,YAAL,GAAoB,IAApB;AACAJ,aAAUsB,eAAV,CAA0B,KAAKvD,EAA/B;AACA;AAtJmC,EAArC;;AAyJAR,QAAO0F,iBAAP,CAAyB,YAAzB,EAAuC;AACtCC,qBAAmB;AAClBC,aAAU;AADQ,GADmB;AAItCC,YAAU;AACT,cAAW,iBADF;AAET,wBAAqB;AAFZ;AAJ4B,EAAvC,E;;;;;;;;AChKA,KAAMvD,QAAQ,EAAd;;AAEA;;;;AAIAA,OAAMS,aAAN,GAAsB,UAAC+C,UAAD,EAAc;AAClC,OAAIC,SAASxB,SAASyB,aAAT,CAAuB,UAAvB,CAAb;AAAA,OAAiDC,uBAAjD;;AAEA,OAAI,CAACF,MAAL,EAAa;AACX,SAAIG,QAAQ3B,SAASyB,aAAT,CAAuB,SAAvB,CAAZ;AACAD,cAASxB,SAAS4B,aAAT,CAAuB,UAAvB,CAAT;AACAD,WAAM7C,WAAN,CAAkB0C,MAAlB;AACD;;AAPiC;AAAA;AAAA;;AAAA;AASlC,0BAAiBD,UAAjB,8HAA6B;AAAA,WAApBM,IAAoB;;AAC3BH,wBAAiB,KAAjB;;AAD2B;AAAA;AAAA;;AAAA;AAG3B,+BAAkBF,OAAOM,QAAzB,mIAAmC;AAAA,eAA1BC,KAA0B;;AACjC,eAAIF,KAAKG,EAAL,KAAYD,MAAMC,EAAtB,EAA0B;AACxBN,8BAAiB,IAAjB;AACD;AACF;AAP0B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAS3B,WAAI,CAACA,cAAL,EAAqB;AACnB,aAAIO,aAAajC,SAAS4B,aAAT,CAAuBC,KAAKhF,IAA5B,CAAjB;AACAoF,oBAAWxF,YAAX,CAAwB,IAAxB,EAA8BoF,KAAKG,EAAnC;AACAC,oBAAWxF,YAAX,CAAwB,KAAxB,EAA+BoF,KAAKK,GAApC;AACAV,gBAAO1C,WAAP,CAAmBmD,UAAnB;AACD;AACF;AAxBiC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAyBnC,EAzBD;;AA4BA;;;;AAIAlE,OAAMoE,MAAN,GAAe,UAASC,CAAT,EAAYC,CAAZ,EAAe;AAC7B,QAAK,IAAIpB,GAAT,IAAgBoB,CAAhB,EAAmB;AAClB,SAAIA,EAAEC,cAAF,CAAiBrB,GAAjB,CAAJ,EAA2B;AAC1BmB,SAAEnB,GAAF,IAASoB,EAAEpB,GAAF,CAAT;AACA;AACD;AACD,UAAOmB,CAAP;AACA,EAPD;;AAUArE,OAAMwE,KAAN,GAAc,UAASC,QAAT,EAAmB;AAChC,OAAIC,MAAMC,OAAN,CAAcF,QAAd,CAAJ,EAA6B;AAC5B,YAAOA,SAASG,KAAT,CAAe,CAAf,CAAP;AACA;;AAED;AACA;AACA,OAAMJ,QAAQK,OAAOC,MAAP,CAAcD,OAAOE,cAAP,CAAsBN,QAAtB,CAAd,CAAd;AACA,OAAIO,IAAIC,SAAR;AACA,OAAMC,OAAOL,OAAOM,mBAAP,CAA2BV,QAA3B,CAAb;AACAO,OAAI,CAAJ;AACA,UAAOA,IAAIE,KAAK/B,MAAhB,EAAwB;AACvB;AACA0B,YAAOO,cAAP,CAAsBZ,KAAtB,EAA6BU,KAAKF,CAAL,CAA7B,EAAsCH,OAAOQ,wBAAP,CAAgCZ,QAAhC,EAA0CS,KAAKF,CAAL,CAA1C,CAAtC;AACAA;AACA;AACD,UAAOR,KAAP;AACA,EAjBD;;AAoBAxE,OAAMsF,aAAN,GAAsB,UAASpH,EAAT,EAAaD,OAAb,EAAsB;AAC1C,OAAIC,GAAGqH,YAAH,CAAgB,MAAhB,CAAJ,EAA6B;AAC3B,SAAIC,QAAQtH,GAAGuH,YAAH,CAAgB,MAAhB,CAAZ;AACA,SAAID,KAAJ,EAAW;AACTA,aAAMvH,OAAN,GAAgBA,OAAhB;AACAC,UAAGQ,YAAH,CAAgB,MAAhB,EAAwB8G,KAAxB;AACD;AACF;AACDtH,MAAGC,QAAH,CAAYC,QAAZ,CAAqB,UAAUC,CAAV,EAAa;AAChC,SAAIA,EAAEC,QAAN,EAAgB;AACdD,SAAEC,QAAF,CAAWC,WAAX,GAAyB,IAAzB;AACAF,SAAEC,QAAF,CAAWL,OAAX,GAAqBA,OAArB;AACD;AACF,IALD;AAR0C;AAAA;AAAA;;AAAA;AAc1C,2BAAiBC,GAAGe,gBAAH,CAAoB,QAApB,CAAjB,mIAAgD;AAAA,WAAvCR,IAAuC;;AAC9CA,YAAKC,YAAL,CAAkB,SAAlB,EAA6BT,OAA7B;AACD;AAhByC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAiB3C,EAjBD;;AAoBA;AACA+B,OAAM0F,cAAN,GAAuB,UAASxH,EAAT,EAAayH,SAAb,EAAwB;AAC7C,OAAIC,cAAc,OAAlB;AACA,OAAI1H,GAAG2H,UAAH,CAAcpH,IAAd,IAAsBP,GAAG2H,UAAH,CAAcpH,IAAd,CAAmBqH,WAA7C,EAA0D;AACxDF,mBAAc1H,GAAG2H,UAAH,CAAcpH,IAAd,CAAmBqH,WAAnB,CAA+BF,WAA7C;AACAA,mBAAe,CAAC,MAAMD,SAAP,IAAoBC,WAAnC;AACD;AACD,UAAOA,WAAP;AACD,EAPD;;AASAlG,QAAOC,OAAP,GAAiBK,KAAjB,C;;;;;;;;AClGAN,QAAOC,OAAP,GAAiB,CACf,EAAEb,MAAM,KAAR,EAAemF,IAAI,qBAAnB,EAA0CE,KAAQzG,OAAOG,WAAf,0BAA1C,EADe,EAEf,EAAEiB,MAAM,KAAR,EAAemF,IAAI,2BAAnB,EAAgDE,KAAQzG,OAAOG,WAAf,gCAAhD,EAFe,EAGf,EAAEiB,MAAM,KAAR,EAAemF,IAAI,sBAAnB,EAA2CE,KAAQzG,OAAOG,WAAf,2BAA3C,EAHe,EAIf,EAAEiB,MAAM,KAAR,EAAemF,IAAI,yBAAnB,EAA8CE,KAAQzG,OAAOG,WAAf,8BAA9C,EAJe,EAKf,EAAEiB,MAAM,KAAR,EAAemF,IAAI,qBAAnB,EAA0CE,KAAQzG,OAAOG,WAAf,0BAA1C,EALe,EAMf,EAAEiB,MAAM,KAAR,EAAemF,IAAI,uBAAnB,EAA4CE,KAAQzG,OAAOG,WAAf,4BAA5C,EANe,EAOf,EAAEiB,MAAM,KAAR,EAAemF,IAAI,sBAAnB,EAA2CE,KAAQzG,OAAOG,WAAf,0BAA3C,EAPe,EAQf,EAAEiB,MAAM,OAAR,EAAiBmF,IAAI,qBAArB,EAA4CE,KAAQzG,OAAOG,WAAf,sBAA5C,EARe,EASf,EAAEiB,MAAM,OAAR,EAAiBmF,IAAI,uBAArB,EAA8CE,KAAQzG,OAAOG,WAAf,wBAA9C,EATe,CAAjB,C;;;;;;;;ACAA,KAAMkI,UAAU,mBAAAjI,CAAQ,CAAR,CAAhB;AACA,KAAMkI,SAAS,mBAAAlI,CAAQ,EAAR,CAAf;AACA,KAAMqC,YAAY,mBAAArC,CAAQ,EAAR,CAAlB;AACA,KAAMoC,OAAO,EAAb;;AAEAA,MAAKhC,EAAL,GAAU,IAAV;;AAEAgC,MAAKlB,IAAL,GAAY,UAACd,EAAD,EAAM;AAChBgC,QAAKhC,EAAL,GAAUA,EAAV;AACAiC,aAAUjC,EAAV,GAAeA,EAAf;AACAiC,aAAUC,GAAV,GAAgBlC,GAAGkC,GAAnB;AACD,EAJD;;AAMA;AACA;;AAEAF,MAAKQ,WAAL,GAAmB,YAAK;AACtB,OAAIuF,UAAUhE,SAAS4B,aAAT,CAAuB,UAAvB,CAAd;AACAoC,WAAQvH,YAAR,CAAqB,UAArB,EAAiC,cAAjC;AACAuH,WAAQvH,YAAR,CAAqB,UAArB,EAAiC,QAAjC;AACAuH,WAAQvH,YAAR,CAAqB,SAArB,EAAgC,IAAhC;;AAEA,OAAIR,KAAK+D,SAAS4B,aAAT,CAAuB,WAAvB,CAAT;AACA3F,MAAGQ,YAAH,CAAgB,OAAhB,EAAyB,OAAzB;AACAR,MAAGQ,YAAH,CAAgB,QAAhB,EAA0B,OAA1B;AACAR,MAAGQ,YAAH,CAAgB,QAAhB,EAA0B,MAA1B;AACAR,MAAGQ,YAAH,CAAgB,OAAhB,EAAyBsH,OAAOE,cAAhC;AACAD,WAAQlF,WAAR,CAAoB7C,EAApB;;AAEA,UAAO+H,OAAP;AACD,EAdD;;AAgBA;AACA;;AAEA/F,MAAKS,MAAL,GAAc,YAAI;AAChB,OAAIsF,UAAUhE,SAAS4B,aAAT,CAAuB,UAAvB,CAAd;AACAoC,WAAQvH,YAAR,CAAqB,UAArB,EAAiC,WAAjC;AACAuH,WAAQvH,YAAR,CAAqB,SAArB,EAAgC,IAAhC;;AAEA,OAAIR,KAAK+D,SAAS4B,aAAT,CAAuB,WAAvB,CAAT;AACA3F,MAAGQ,YAAH,CAAgB,OAAhB,EAAyB,OAAzB;AACAR,MAAGQ,YAAH,CAAgB,QAAhB,EAA0B,OAA1B;AACAR,MAAGQ,YAAH,CAAgB,QAAhB,EAA0B,MAA1B;AACAR,MAAGQ,YAAH,CAAgB,OAAhB,EAAyBsH,OAAOE,cAAhC;AACAD,WAAQlF,WAAR,CAAoB7C,EAApB;;AAEA,UAAO+H,OAAP;AACD,EAbD;;AAeA;AACA;;AAEA/F,MAAKU,SAAL,GAAiB,YAAK;AACpB,OAAIqF,UAAUhE,SAAS4B,aAAT,CAAuB,UAAvB,CAAd;AACAoC,WAAQvH,YAAR,CAAqB,UAArB,EAAiC,cAAjC;AACAuH,WAAQvH,YAAR,CAAqB,UAArB,EAAiC,SAAjC;AACAuH,WAAQvH,YAAR,CAAqB,SAArB,EAAgC,IAAhC;;AAEA,OAAIR,KAAK+D,SAAS4B,aAAT,CAAuB,WAAvB,CAAT;AACA3F,MAAGQ,YAAH,CAAgB,OAAhB,EAAyB,OAAzB;AACAR,MAAGQ,YAAH,CAAgB,QAAhB,EAA0B,OAA1B;AACAR,MAAGQ,YAAH,CAAgB,QAAhB,EAA0B,MAA1B;AACAR,MAAGQ,YAAH,CAAgB,OAAhB,EAAyBsH,OAAOE,cAAhC;AACAD,WAAQlF,WAAR,CAAoB7C,EAApB;;AAEA,UAAO+H,OAAP;AACD,EAdD;;AAgBA;AACA;;AAEA/F,MAAKc,eAAL,GAAuB,YAAK;AAC1B,OAAIzB,OAAOwG,QAAQI,SAAnB;AACA,OAAIF,UAAUhE,SAAS4B,aAAT,CAAuB,UAAvB,CAAd;AACAoC,WAAQvH,YAAR,CAAqB,UAArB,EAAiC,iBAAjC;;AAEA,OAAI0H,UAAU,CAAd;AACA,QAAK,IAAIpB,CAAT,IAAczF,IAAd,EAAoB;AAClB,SAAI8G,SAAS,SAAOrB,CAApB;AACA,SAAI9B,MAAMhD,KAAKgD,GAAL,CAASmD,MAAT,EAAiB9G,KAAKyF,CAAL,EAAQlG,IAAzB,EAA+BS,KAAKyF,CAAL,EAAQsB,KAAvC,CAAV;AACA,SAAIC,UAAUvB,IAAE,CAAhB;AACA,SAAIwB,IAAIR,OAAOS,SAAP,GAAiBF,OAAzB;AACA,SAAIG,IAAIV,OAAOS,SAAP,GAAiBL,OAAzB;AACAlD,SAAIxE,YAAJ,CAAiB,UAAjB,EAAgC8H,CAAhC,UAAsCE,CAAtC;AACA,SAAIH,YAAY,CAAhB,EAAmB;AAAEH;AAAY;AACjCH,aAAQlF,WAAR,CAAoBmC,GAApB;AACD;;AAED,UAAO+C,OAAP;AACD,EAlBD;;AAoBA;AACA;;AAEA/F,MAAKW,kBAAL,GAA0B,YAAK;AAC7B,OAAItB,OAAOwG,QAAQY,YAAnB;AACA,OAAIV,UAAUhE,SAAS4B,aAAT,CAAuB,UAAvB,CAAd;AACAoC,WAAQvH,YAAR,CAAqB,UAArB,EAAiC,iBAAjC;;AAEA,OAAI0H,UAAU,CAAd;AAAA,OAAiBG,UAAU,CAA3B;AAAA,OAA8BK,iBAAiB,KAA/C;;AAEA,QAAK,IAAI5B,CAAT,IAAczF,IAAd,EAAoB;AAClB,SAAI8G,SAAS,UAAQrB,CAArB;AACA,SAAI9B,MAAMhD,KAAKgD,GAAL,CAASmD,MAAT,EAAiB9G,KAAKyF,CAAL,EAAQlG,IAAzB,EAA+BS,KAAKyF,CAAL,EAAQsB,KAAvC,CAAV;;AAEA,SAAIE,IAAIR,OAAOS,SAAP,GAAiBF,OAAzB;AACA,SAAIG,IAAIV,OAAOS,SAAP,GAAiBL,OAAzB;;AAEA;AACA,SAAIA,YAAY,CAAhB,EAAmB;AACjBI,WAAIA,IAAIR,OAAOS,SAAP,GAAiB,CAAzB;AACD;;AAED;AACA,SAAIG,cAAJ,EAAoB;AAClBJ,WAAIA,IAAIR,OAAOa,eAAX,GAA6Bb,OAAOS,SAApC,GAAiD,QAAM,CAA3D;AACD;;AAED;AACA,SAAIlH,KAAKyF,CAAL,EAAQlG,IAAR,KAAiB,UAArB,EAAiC;AAC/B8H,wBAAiB,IAAjB;AACAJ,WAAIA,IAAE,KAAN;AACAE,WAAIV,OAAOS,SAAP,GAAiBL,OAAjB,GAA4B,IAAhC;AACD;;AAEDlD,SAAIxE,YAAJ,CAAiB,UAAjB,EAAgC8H,CAAhC,UAAsCE,CAAtC;;AAEA,SAAIN,YAAY,CAAZ,IAAiBG,YAAY,CAAjC,EAAoC;AAClCA,iBAAU,CAAC,CAAX;AACAH;AACD,MAHD,MAGO,IAAIG,YAAY,CAAhB,EAAmB;AACxBA,iBAAU,CAAC,CAAX;AACAH;AACD;AACDG;;AAEAN,aAAQlF,WAAR,CAAoBmC,GAApB;AACD;;AAED,UAAO+C,OAAP;AACD,EA9CD;;AAgDA;AACA;;AAEA/F,MAAKY,aAAL,GAAqB,YAAK;AACxB,OAAIvB,OAAOwG,QAAQe,OAAnB;AACA,OAAIb,UAAUhE,SAAS4B,aAAT,CAAuB,UAAvB,CAAd;AACAoC,WAAQvH,YAAR,CAAqB,UAArB,EAAiC,iBAAjC;;AAEA,OAAI0H,UAAU,CAAd;AAAA,OAAiBG,UAAU,CAA3B;AAAA,OAA8BK,iBAAiB,KAA/C;;AAEA,QAAK,IAAI5B,CAAT,IAAczF,IAAd,EAAoB;;AAElB,SAAI8G,SAAS,aAAWrB,CAAxB;AACA,SAAI9B,MAAMhD,KAAKgD,GAAL,CAASmD,MAAT,EAAiB9G,KAAKyF,CAAL,EAAQlG,IAAzB,EAA+BS,KAAKyF,CAAL,EAAQsB,KAAvC,CAAV;AACA,SAAIE,IAAIR,OAAOS,SAAP,GAAiBF,OAAzB;AACA,SAAIG,IAAIV,OAAOS,SAAP,GAAiBL,OAAzB;;AAEA;AACA,SAAIQ,cAAJ,EAAoB;AAClBJ,WAAIA,IAAIR,OAAOa,eAAX,GAA6Bb,OAAOS,SAApC,GAAiD,QAAM,CAA3D;AACD;;AAED;AACA,SAAIlH,KAAKyF,CAAL,EAAQlG,IAAR,KAAiB,UAArB,EAAiC;AAC/B8H,wBAAiB,IAAjB;AACAJ,WAAIA,IAAE,KAAN;AACAE,WAAIV,OAAOS,SAAP,GAAiBL,OAAjB,GAA4B,IAAhC;AACD;;AAEDlD,SAAIxE,YAAJ,CAAiB,UAAjB,EAAgC8H,CAAhC,UAAsCE,CAAtC;;AAEA,SAAIH,YAAY,CAAhB,EAAmB;AACjBA,iBAAU,CAAC,CAAX;AACAH;AACD;AACDG;AACAN,aAAQlF,WAAR,CAAoBmC,GAApB;AACD;;AAED,UAAO+C,OAAP;AACD,EArCD;;AAuCA;AACA;;AAEA/F,MAAKe,aAAL,GAAqB,YAAK;AACxB,OAAI1B,OAAOwG,QAAQgB,OAAnB;AACA,OAAId,UAAUhE,SAAS4B,aAAT,CAAuB,UAAvB,CAAd;AACAoC,WAAQvH,YAAR,CAAqB,UAArB,EAAiC,iBAAjC;;AAEA,OAAIsI,QAAQ,CAAZ;AACA,QAAK,IAAIhC,CAAT,IAAczF,IAAd,EAAoB;AAClB,SAAI8G,SAAS,YAAUrB,CAAvB;AACA,SAAI9B,MAAMhD,KAAKgD,GAAL,CAASmD,MAAT,EAAiB9G,KAAKyF,CAAL,EAAQlG,IAAzB,EAA+BS,KAAKyF,CAAL,EAAQsB,KAAvC,CAAV;;AAEApD,SAAIxE,YAAJ,CAAiB,UAAjB,UAAmCsI,KAAnC;AACA,SAAIhC,KAAK,CAAT,EAAY;AACVgC,gBAAShB,OAAOiB,YAAP,GAAoB,IAA7B;AACD,MAFD,MAGK,IAAIjC,KAAK,CAAT,EAAY;AACfgC,gBAAShB,OAAOS,SAAP,GAAiB,IAA1B;AACD;AACDR,aAAQlF,WAAR,CAAoBmC,GAApB;AACD;;AAED,UAAO+C,OAAP;AACD,EArBD;;AAuBA;AACA;;AAEA/F,MAAKgD,GAAL,GAAW,UAACe,EAAD,EAAKnF,IAAL,EAAWwH,KAAX,EAAoB;AAC7B,OAAI9F,gBAAJ;;AAEA,OAAItC,KAAK+D,SAAS4B,aAAT,CAAuB,WAAvB,CAAT;AACA3F,MAAGQ,YAAH,CAAgB,QAAhB,EAA0BuF,EAA1B;AACA/F,MAAGQ,YAAH,CAAgB,OAAhB,EAAyBsH,OAAOS,SAAhC;AACAvI,MAAGQ,YAAH,CAAgB,QAAhB,EAA0BsH,OAAOS,SAAjC;AACAvI,MAAGQ,YAAH,CAAgB,QAAhB,EAA0B,OAA1B;AACAR,MAAGQ,YAAH,CAAgB,UAAhB,EAA4B,OAA5B;AACAR,MAAGQ,YAAH,CAAgB,UAAhB,EAA4BI,IAA5B;AACAZ,MAAGQ,YAAH,CAAgB,WAAhB,EAA6B4H,KAA7B;AACApI,MAAGQ,YAAH,CAAgB,OAAhB,EAAyBsH,OAAOE,cAAhC;;AAEA;AACA;;AAEA/F,aAAU+G,YAAV,CAAuBhJ,EAAvB;;AAEA;AACA;;AAEAA,MAAGiJ,SAAH,GAAelF,SAAS4B,aAAT,CAAuB,SAAvB,CAAf;AACA3F,MAAGiJ,SAAH,CAAazI,YAAb,CAA0B,OAA1B,EAAmCsH,OAAOS,SAAP,GAAiB,IAApD;AACAvI,MAAGiJ,SAAH,CAAazI,YAAb,CAA0B,QAA1B,EAAoCsH,OAAOS,SAAP,GAAiB,IAArD;AACAvI,MAAGiJ,SAAH,CAAazI,YAAb,CAA0B,UAA1B,EAAsCsH,OAAOS,SAAP,GAAiB,CAAjB,GAAmB,GAAnB,GAAuBT,OAAOS,SAAP,GAAiB,CAAxC,GAA0C,SAAhF;AACAvI,MAAGiJ,SAAH,CAAazI,YAAb,CAA0B,KAA1B,EAAiC,uBAAjC;AACAR,MAAG6C,WAAH,CAAe7C,GAAGiJ,SAAlB;;AAEA;AACA;;AAEA,OAAIrI,SAAS,MAAT,IAAmBA,SAAS,UAA5B,IAA0CA,SAAU,QAAxD,EAAkE;AAChE,SAAIsI,YAAYnF,SAAS4B,aAAT,CAAuB,QAAvB,CAAhB;AACAuD,eAAU1I,YAAV,CAAuB,OAAvB,EAAgC4H,KAAhC;AACAc,eAAU1I,YAAV,CAAuB,OAAvB,EAAgC,SAAhC;AACA0I,eAAU1I,YAAV,CAAuB,UAAvB,EAAmCsH,OAAOS,SAAP,GAAiB,CAAjB,GAAmB,GAAnB,GAAuBT,OAAOS,SAAP,GAAiB,CAAxC,GAA0C,OAA7E;AACAW,eAAU1I,YAAV,CAAuB,OAAvB,EAAgC,gBAAhC;AACA0I,eAAU1I,YAAV,CAAuB,OAAvB,EAAgC,QAAhC;AACA0I,eAAU1I,YAAV,CAAuB,UAAvB,EAAmC,QAAnC;AACAR,QAAG6C,WAAH,CAAeqG,SAAf;AACD;;AAED;AACA;;AAEA,OAAItI,SAAS,UAAb,EAAyB;AACvBZ,QAAGQ,YAAH,CAAgB,OAAhB,EAAyBsH,OAAOa,eAAhC;AACA3I,QAAGQ,YAAH,CAAgB,QAAhB,EAA0BsH,OAAOqB,gBAAjC;AACAnJ,QAAGQ,YAAH,CAAgB,OAAhB,EAAyB,SAAzB;AACAR,QAAGiJ,SAAH,CAAazI,YAAb,CAA0B,OAA1B,EAAmCsH,OAAOa,eAAP,GAAuB,IAA1D;AACA3I,QAAGiJ,SAAH,CAAazI,YAAb,CAA0B,QAA1B,EAAoCsH,OAAOqB,gBAAP,GAAwB,GAA5D;AACAnJ,QAAGiJ,SAAH,CAAazI,YAAb,CAA0B,UAA1B,EAAsCsH,OAAOa,eAAP,GAAuB,CAAvB,GAAyB,GAAzB,GAA6Bb,OAAOqB,gBAAP,GAAwB,CAArD,GAAuD,QAA7F;AACAD,eAAU1I,YAAV,CAAuB,OAAvB,EAAgC,SAAhC;AACA0I,eAAU1I,YAAV,CAAuB,OAAvB,EAAgC,gBAAhC;AACA0I,eAAU1I,YAAV,CAAuB,UAAvB,EAAmCsH,OAAOa,eAAP,GAAuB,CAAvB,GAAyB,GAAzB,GAA6Bb,OAAOqB,gBAAP,GAAwB,CAArD,GAAuD,IAA1F;AACD;;AAED;AACA;;AAbA,QAeK,IAAIvI,SAAS,QAAb,EAAuB;AAC1BsI,iBAAU1I,YAAV,CAAuB,OAAvB,EAAgC,gBAAhC;AACD;;AAED;AACA;;AAEA,OAAII,SAAS,WAAT,IAAwBA,SAAS,OAAjC,IAA4CA,SAAS,SAAzD,EAAoE;AAClEZ,QAAGQ,YAAH,CAAgB,OAAhB,EAAyBsH,OAAOiB,YAAhC;AACA/I,QAAGiJ,SAAH,CAAazI,YAAb,CAA0B,OAA1B,EAAmCsH,OAAOiB,YAAP,GAAoB,IAAvD;AACA/I,QAAGiJ,SAAH,CAAazI,YAAb,CAA0B,UAA1B,EAAsCsH,OAAOiB,YAAP,GAAoB,CAApB,GAAsB,GAAtB,GAA0BjB,OAAOS,SAAP,GAAiB,CAA3C,GAA6C,QAAnF;AACD;;AAED;AACA;;AAEA,OAAI3H,SAAS,OAAb,EAAsB;AACpB,SAAIwI,UAAUrF,SAAS4B,aAAT,CAAuB,SAAvB,CAAd;AACAyD,aAAQ5I,YAAR,CAAqB,WAArB,EAAkC,MAAlC;AACA4I,aAAQ5I,YAAR,CAAqB,OAArB,EAA8B,OAA9B;AACA4I,aAAQ5I,YAAR,CAAqB,QAArB,EAA+B,OAA/B;AACA4I,aAAQ5I,YAAR,CAAqB,UAArB,EAAiC,gBAAjC;AACA4I,aAAQ5I,YAAR,CAAqB,KAArB,EAA4B,sBAA5B;AACAR,QAAG6C,WAAH,CAAeuG,OAAf;AACApH,UAAKhC,EAAL,CAAQqJ,QAAR,GAAmBrJ,EAAnB;AACD;;AAED;AACA;;AAZA,QAcK,IAAIY,SAAS,QAAb,EAAuB;AAC1B,WAAIwI,UAAUrF,SAAS4B,aAAT,CAAuB,SAAvB,CAAd;AACAyD,eAAQ5I,YAAR,CAAqB,OAArB,EAA8B,OAA9B;AACA4I,eAAQ5I,YAAR,CAAqB,QAArB,EAA+B,OAA/B;AACA4I,eAAQ5I,YAAR,CAAqB,UAArB,EAAiC,gBAAjC;AACA4I,eAAQ5I,YAAR,CAAqB,KAArB,EAA4B,uBAA5B;AACAR,UAAG6C,WAAH,CAAeuG,OAAf;AACD;;AAED;AACA;;AAVK,UAYA,IAAIxI,SAAS,WAAb,EAA0B;AAC7B,aAAIwI,UAAUrF,SAAS4B,aAAT,CAAuB,SAAvB,CAAd;AACAyD,iBAAQ5I,YAAR,CAAqB,OAArB,EAA8B,OAA9B;AACA4I,iBAAQ5I,YAAR,CAAqB,QAArB,EAA+B,OAA/B;AACA4I,iBAAQ5I,YAAR,CAAqB,UAArB,EAAiC,gBAAjC;AACA4I,iBAAQ5I,YAAR,CAAqB,KAArB,EAA4B,0BAA5B;AACAR,YAAG6C,WAAH,CAAeuG,OAAf;AACD;;AAED;AACA;;AAVK,YAYA,IAAIxI,SAAS,OAAb,EAAsB;AACzBZ,cAAGQ,YAAH,CAAgB,QAAhB,EAA0BsH,OAAOiB,YAAjC;AACA/I,cAAGiJ,SAAH,CAAazI,YAAb,CAA0B,QAA1B,EAAoCsH,OAAOiB,YAAP,GAAoB,IAAxD;AACA/I,cAAGiJ,SAAH,CAAazI,YAAb,CAA0B,UAA1B,EAAsCsH,OAAOiB,YAAP,GAAoB,CAApB,GAAsB,GAAtB,GAA0BjB,OAAOiB,YAAP,GAAoB,CAA9C,GAAgD,QAAtF;;AAEA,eAAIO,YAAYvF,SAAS4B,aAAT,CAAuB,UAAvB,CAAhB;AACA2D,qBAAU9I,YAAV,CAAuB,OAAvB,EAAgC,SAAhC;AACA8I,qBAAU9I,YAAV,CAAuB,QAAvB,EAAiC,KAAjC;AACA8I,qBAAU9I,YAAV,CAAuB,UAAvB,EAAmC,gBAAnC;AACAR,cAAG6C,WAAH,CAAeyG,SAAf;;AAEA,eAAIF,UAAUrF,SAAS4B,aAAT,CAAuB,SAAvB,CAAd;AACAyD,mBAAQ5I,YAAR,CAAqB,OAArB,EAA8B,OAA9B;AACA4I,mBAAQ5I,YAAR,CAAqB,QAArB,EAA+B,OAA/B;AACA4I,mBAAQ5I,YAAR,CAAqB,UAArB,EAAiC,iBAAjC;AACA4I,mBAAQ5I,YAAR,CAAqB,KAArB,EAA4B,sBAA5B;AACAR,cAAG6C,WAAH,CAAeuG,OAAf;AACD;;AAED;AACA;;AApBK,cAsBA,IAAIxI,SAAS,SAAb,EAAwB;AAC3B,iBAAIwI,UAAUrF,SAAS4B,aAAT,CAAuB,SAAvB,CAAd;AACAyD,qBAAQ5I,YAAR,CAAqB,OAArB,EAA8B,OAA9B;AACA4I,qBAAQ5I,YAAR,CAAqB,QAArB,EAA+B,OAA/B;AACA4I,qBAAQ5I,YAAR,CAAqB,UAArB,EAAiC,gBAAjC;AACA4I,qBAAQ5I,YAAR,CAAqB,KAArB,EAA4B,wBAA5B;AACAR,gBAAG6C,WAAH,CAAeuG,OAAf;AACD;;AAED,UAAOpJ,EAAP;AACD,EAlJD;;AAoJAwB,QAAOC,OAAP,GAAiBO,IAAjB,C;;;;;;;;AC1WA,KAAM6F,UAAU;AACdI,cAAW,CACT,EAAErH,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EADS,EAET,EAAExH,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EAFS,EAGT,EAAExH,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EAHS,EAIT,EAAExH,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EAJS,EAKT,EAAExH,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EALS,EAMT,EAAExH,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EANS,EAOT,EAAExH,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EAPS,EAQT,EAAExH,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EARS,EAST,EAAExH,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EATS,EAUT,EAAExH,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EAVS,EAWT,EAAExH,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EAXS,EAYT,EAAExH,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EAZS,CADG;;AAgBdK,iBAAc,CACZ,EAAE7H,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EADY,EAEZ,EAAExH,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EAFY,EAGZ,EAAExH,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EAHY,EAIZ,EAAExH,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EAJY,EAKZ,EAAExH,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EALY,EAMZ,EAAExH,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EANY,EAOZ,EAAExH,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EAPY,EAQZ,EAAExH,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EARY,EASZ,EAAExH,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EATY,EAUZ,EAAExH,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EAVY,EAYZ,EAAExH,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EAZY,EAaZ,EAAExH,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EAbY,EAcZ,EAAExH,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EAdY,EAeZ,EAAExH,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EAfY,EAgBZ,EAAExH,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EAhBY,EAiBZ,EAAExH,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EAjBY,EAkBZ,EAAExH,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EAlBY,EAmBZ,EAAExH,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EAnBY,EAoBZ,EAAExH,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EApBY,EAsBZ,EAAExH,MAAM,OAAR,EAtBY,EAuBZ,EAAEA,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EAvBY,EAwBZ,EAAExH,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EAxBY,EAyBZ,EAAExH,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EAzBY,EA0BZ,EAAExH,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EA1BY,EA2BZ,EAAExH,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EA3BY,EA4BZ,EAAExH,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EA5BY,EA6BZ,EAAExH,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EA7BY,EA8BZ,EAAExH,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EA9BY,EA+BZ,EAAExH,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EA/BY,EAiCZ,EAAExH,MAAM,QAAR,EAAkBwH,OAAO,KAAzB,EAjCY,EAkCZ,EAAExH,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EAlCY,EAmCZ,EAAExH,MAAM,UAAR,EAAoBwH,OAAO,EAA3B,EAnCY,EAoCZ,EAAExH,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EApCY,EAqCZ,EAAExH,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EArCY,CAhBA;;AAwDdQ,YAAS,CACP,EAAEhI,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EADO,EAEP,EAAExH,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EAFO,EAGP,EAAExH,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EAHO,EAIP,EAAExH,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EAJO,EAKP,EAAExH,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EALO,EAMP,EAAExH,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EANO,EAOP,EAAExH,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EAPO,EAQP,EAAExH,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EARO,EASP,EAAExH,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EATO,EAUP,EAAExH,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EAVO,EAYP,EAAExH,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EAZO,EAaP,EAAExH,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EAbO,EAcP,EAAExH,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EAdO,EAeP,EAAExH,MAAM,MAAR,EAAgBwH,OAAO,IAAvB,EAfO,EAgBP,EAAExH,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EAhBO,EAiBP,EAAExH,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EAjBO,EAkBP,EAAExH,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EAlBO,EAmBP,EAAExH,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EAnBO,EAoBP,EAAExH,MAAM,MAAR,EAAgBwH,OAAO,IAAvB,EApBO,EAqBP,EAAExH,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EArBO,EAuBP,EAAExH,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EAvBO,EAwBP,EAAExH,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EAxBO,EAyBP,EAAExH,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EAzBO,EA0BP,EAAExH,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EA1BO,EA2BP,EAAExH,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EA3BO,EA4BP,EAAExH,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EA5BO,EA6BP,EAAExH,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EA7BO,EA8BP,EAAExH,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EA9BO,EA+BP,EAAExH,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EA/BO,EAgCP,EAAExH,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EAhCO,EAkCP,EAAExH,MAAM,QAAR,EAAkBwH,OAAO,KAAzB,EAlCO,EAmCP,EAAExH,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EAnCO,EAoCP,EAAExH,MAAM,UAAR,EAAoBwH,OAAO,EAA3B,EApCO,EAqCP,EAAExH,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EArCO,EAsCP,EAAExH,MAAM,MAAR,EAAgBwH,OAAO,GAAvB,EAtCO,CAxDK;;AAiGdS,YAAS,CACP,EAAEjI,MAAM,WAAR,EAAqBwH,OAAO,KAA5B,EADO,EAEP,EAAExH,MAAM,OAAR,EAAiBwH,OAAO,IAAxB,EAFO,EAGP,EAAExH,MAAM,SAAR,EAAmBwH,OAAO,GAA1B,EAHO;AAjGK,EAAhB;;AAwGA5G,QAAOC,OAAP,GAAiBoG,OAAjB,C;;;;;;;;ACxGA,KAAMC,SAAS;AACbE,mBAAgB,SADH;AAEbuB,wBAAqB,SAFR;AAGbC,qBAAkB,SAHL;AAIbC,0BAAuB,SAJV;AAKbC,6BAA0B,SALb;AAMbnB,cAAW,IANE;AAObI,oBAAiB,KAPJ;AAQbQ,qBAAkB,IARL;AASbJ,iBAAc;AATD,EAAf;;AAYAvH,QAAOC,OAAP,GAAiBqG,MAAjB,C;;;;;;;;ACZA,KAAMA,SAAS,mBAAAlI,CAAQ,EAAR,CAAf;AACA,KAAMkC,QAAQ,mBAAAlC,CAAQ,CAAR,CAAd;AACA,KAAMC,QAAQ,mBAAAD,CAAQ,CAAR,CAAd;AACA,KAAMsC,MAAM,mBAAAtC,CAAQ,EAAR,CAAZ;AACA,KAAMqC,YAAY,EAAlB;;AAEAA,WAAUjC,EAAV,GAAe,IAAf;;AAEA;AACA;;AAEAiC,WAAUgB,YAAV,GAAyB,UAAUjD,EAAV,EAAc;;AAEtC,MAAIA,GAAG2J,UAAP,EAAmB;AAClB3J,MAAGQ,YAAH,CAAgB,UAAhB,EAA4BR,GAAG2J,UAA/B;AACA;AACD3J,KAAGmC,MAAH,GAAY,IAAZ;AALsC;AAAA;AAAA;;AAAA;AAMtC,wBAAiBnC,GAAGe,gBAAH,CAAoB,WAApB,CAAjB,8HAAmD;AAAA,QAA1C6E,IAA0C;AAAA;AAAA;AAAA;;AAAA;AAClD,2BAAkBA,KAAKC,QAAvB,mIAAiC;AAAA,UAAxB+D,KAAwB;;AAChCA,YAAMpJ,YAAN,CAAmB,MAAnB,EAA2B,IAA3B;AACA;AAHiD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIlD;AAVqC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAWtC,MAAIqJ,SAAS7J,GAAG8J,UAAhB;AACA,MAAID,MAAJ,EAAY;AACX;AACA;AACD7J,KAAG+J,OAAH,CAAWlH,WAAX,CAAuB7C,EAAvB;AACA,EAhBD;;AAkBAiC,WAAUkB,YAAV,GAAyB,UAAUnD,EAAV,EAAc;AACtC,MAAIgK,WAAWhK,GAAGuH,YAAH,CAAgB,UAAhB,CAAf;AACA,MAAIyC,SAAS1B,CAAT,KAAe,CAAC,KAApB,EAA2B;AAC1BtI,MAAG2J,UAAH,GAAgBK,QAAhB;AACA;AACDhK,KAAGuB,IAAH,CAAQ,kBAAR;AACAvB,KAAGmC,MAAH,GAAY,KAAZ;AACAnC,KAAGQ,YAAH,CAAgB,UAAhB,EAA4B,sBAA5B;AACAR,KAAGQ,YAAH,CAAgB,SAAhB,EAA2B,EAACG,UAAU,CAAX,EAA3B;AACA,EATD;;AAWAsB,WAAUwB,eAAV,GAA4B,UAAUzD,EAAV,EAAc;AACzC,MAAI6J,SAAS7J,GAAG8J,UAAhB;AACA,MAAI,CAACD,MAAL,EAAa;AACZ;AACA;AACDA,SAAOI,WAAP,CAAmBjK,EAAnB;AACA,EAND;;AAQAiC,WAAUoB,YAAV,GAAyB,UAAUrD,EAAV,EAAc;AACtC,MAAIA,GAAG2J,UAAP,EAAmB;AAClB3J,MAAGQ,YAAH,CAAgB,UAAhB,EAA4BR,GAAG2J,UAA/B;AACA;AACD3J,KAAGuB,IAAH,CAAQ,gBAAR;AACAvB,KAAGmC,MAAH,GAAY,IAAZ;AACAnC,KAAGkK,cAAH,GAAoB,IAApB;AACA,MAAIL,SAAS7J,GAAG8J,UAAhB;AACA,MAAI,CAACD,MAAL,EAAa;AACZ7J,MAAG+J,OAAH,CAAWlH,WAAX,CAAuB7C,EAAvB;AACA;AAVqC;AAAA;AAAA;;AAAA;AAAA;AAAA,QAW7B4F,IAX6B;AAAA;AAAA;AAAA;;AAAA;AAYrC,2BAAkBA,KAAKC,QAAvB,mIAAiC;AAAA,UAAxB+D,KAAwB;;AAChCA,YAAMpJ,YAAN,CAAmB,MAAnB,EAA2B,IAA3B;AACA;AAdoC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAgBrC,aAAS2J,YAAT,GAAwB;AACvBvE,UAAKC,QAAL,CAAc,CAAd,EAAiBvB,mBAAjB,CAAqC,cAArC,EAAqD6F,YAArD;AACAC,gBAAW,YAAY;AACtBxE,WAAKC,QAAL,CAAc,CAAd,EAAiBrF,YAAjB,CAA8B,QAA9B,EAAwC,EAACG,UAAU,GAAX,EAAxC;AACAd,YAAM0B,IAAN,CAAWU,UAAUjC,EAArB,EAAyB,SAAzB;AACAA,SAAGkK,cAAH,GAAoB,KAApB;AACA,MAJD,EAIG,EAJH;AAKA;;AAEDtE,SAAKC,QAAL,CAAc,CAAd,EAAiBrF,YAAjB,CAA8B,QAA9B,EAAwC,EAACG,UAAU,GAAX,EAAxC;AACAiF,SAAKC,QAAL,CAAc,CAAd,EAAiBnC,gBAAjB,CAAkC,cAAlC,EAAkDyG,YAAlD;AA1BqC;;AAWtC,yBAAiBnK,GAAGe,gBAAH,CAAoB,WAApB,CAAjB,mIAAmD;AAAA;AAgBlD;AA3BqC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA4BtC,EA5BD;;AA8BAkB,WAAUsB,eAAV,GAA4B,UAAUvD,EAAV,EAAc;AACzCA,KAAGkK,cAAH,GAAoB,IAApB;AADyC;AAAA;AAAA;;AAAA;AAAA;AAAA,QAEhCtE,IAFgC;AAAA;AAAA;AAAA;;AAAA;AAGxC,2BAAkBA,KAAKC,QAAvB,mIAAiC;AAAA,UAAxB+D,KAAwB;;AAChCA,YAAMpJ,YAAN,CAAmB,MAAnB,EAA2B,IAA3B;AACA;AALuC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAMxCR,OAAGmC,MAAH,GAAY,KAAZ;;AAEA,aAASgI,YAAT,GAAwB;AACvBvE,UAAKC,QAAL,CAAc,CAAd,EAAiBvB,mBAAjB,CAAqC,cAArC,EAAqD6F,YAArD;AACAC,gBAAW,YAAY;AACtB,eAASD,YAAT,GAAwB;AACvBvE,YAAKC,QAAL,CAAc,CAAd,EAAiBvB,mBAAjB,CAAqC,cAArC,EAAqD6F,YAArD;AACAlI,iBAAUkB,YAAV,CAAuBnD,EAAvB;AACAH,aAAM0B,IAAN,CAAWU,UAAUjC,EAArB,EAAyB,YAAzB;AACAA,UAAGkK,cAAH,GAAoB,KAApB;AACA;;AAEDtE,WAAKC,QAAL,CAAc,CAAd,EAAiBrF,YAAjB,CAA8B,SAA9B,EAAyC,EAACG,UAAU,GAAX,EAAzC;AACAiF,WAAKC,QAAL,CAAc,CAAd,EAAiBnC,gBAAjB,CAAkC,cAAlC,EAAkDyG,YAAlD;AACA,MAVD,EAUG,EAVH;AAWA;;AAEDvE,SAAKC,QAAL,CAAc,CAAd,EAAiBrF,YAAjB,CAA8B,SAA9B,EAAyC,EAACG,UAAU,GAAX,EAAzC;AACAiF,SAAKC,QAAL,CAAc,CAAd,EAAiBnC,gBAAjB,CAAkC,cAAlC,EAAkDyG,YAAlD;AAxBwC;;AAEzC,yBAAiBnK,GAAGe,gBAAH,CAAoB,WAApB,CAAjB,mIAAmD;AAAA;AAuBlD;AAzBwC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA0BzC,EA1BD;;AA4BA;AACA;;AAEAkB,WAAU+G,YAAV,GAAyB,UAAChJ,EAAD,EAAQ;AAChCA,KAAG0D,gBAAH,CAAoB,OAApB,EAA6BzB,UAAUoI,QAAvC;AACArK,KAAG0D,gBAAH,CAAoB,WAApB,EAAiCzB,UAAUqI,OAA3C;AACAtK,KAAG0D,gBAAH,CAAoB,SAApB,EAA+BzB,UAAUsI,MAAzC;AACAvK,KAAG0D,gBAAH,CAAoB,YAApB,EAAkCzB,UAAUsI,MAA5C;AACAvK,KAAG0D,gBAAH,CAAoB,YAApB,EAAkCzB,UAAUuI,KAA5C;AACAxK,KAAG0D,gBAAH,CAAoB,uBAApB,EAA6CzB,UAAUuI,KAAvD;AACAxK,KAAG0D,gBAAH,CAAoB,+BAApB,EAAqDzB,UAAUsI,MAA/D;AACA;AACA;AACA,EAVD;;AAYA;AACA;;AAEAtI,WAAUoI,QAAV,GAAqB,YAAY;AAChC;;AAEA,MAAIzJ,OAAO,KAAK2G,YAAL,CAAkB,UAAlB,CAAX;AACA,MAAIa,QAAQ,KAAKb,YAAL,CAAkB,WAAlB,CAAZ;;AAEA,MAAI3G,SAAS,MAAT,IAAmBA,SAAS,UAAhC,EAA4C;AAC3C,OAAIA,SAAS,UAAb,EAAyB;AACxBwH,YAAQ,GAAR;AACA;AACD,OAAInG,UAAUwI,cAAd,EAA8B;AAC7BrC,YAAQA,MAAMsC,WAAN,EAAR;AACAzI,cAAU0I,WAAV;AACA,IAHD,MAIK,IAAI1I,UAAU2I,SAAd,EAAyB;AAC7B3I,cAAU4I,aAAV;AACA;AACDhL,SAAM0B,IAAN,CAAWU,UAAUjC,EAArB,EAAyB,OAAzB,EAAkCoI,KAAlC;AACA,GAZD,MAaK,IAAIxH,SAAS,OAAb,EAAsB;AAC1BqB,aAAU0I,WAAV;AACA,GAFI,MAGA,IAAI/J,SAAS,QAAb,EAAuB;AAC3BqB,aAAU4I,aAAV;AACA,GAFI,MAGA,IAAIjK,SAAS,WAAb,EAA0B;AAC9Bf,SAAM0B,IAAN,CAAWU,UAAUjC,EAArB,EAAyB,WAAzB;AACA,GAFI,MAGA,IAAIY,SAAS,OAAb,EAAsB;AAC1Bf,SAAM0B,IAAN,CAAWU,UAAUjC,EAArB,EAAyB,OAAzB,EAAkC,IAAlC;AACAH,SAAM0B,IAAN,CAAWU,UAAUjC,EAArB,EAAyB,OAAzB,EAAkC,IAAlC;AACA,GAHI,MAIA,IAAIY,SAAS,SAAb,EAAwB;AAC5Bf,SAAM0B,IAAN,CAAWU,UAAUjC,EAArB,EAAyB,SAAzB;AACA;AACD,EAnCD;;AAqCA;AACA;;AAEAiC,WAAUqI,OAAV,GAAoB,YAAY;AAC/B,MAAIrI,UAAUjC,EAAV,CAAakK,cAAjB,EAAiC;AAChC;AACA;AACD,OAAKjK,QAAL,CAAc+J,QAAd,CAAuBc,CAAvB,GAA2B,KAA3B;AACA,MAAI,KAAKvD,YAAL,CAAkB,UAAlB,MAAkC,UAAtC,EAAkD;AACjD,QAAK/G,YAAL,CAAkB,OAAlB,EAA2BsH,OAAO2B,qBAAlC;AACA,GAFD,MAEO;AACN,QAAKjJ,YAAL,CAAkB,OAAlB,EAA2BsH,OAAO0B,gBAAlC;AACA;AACD,EAVD;;AAYA;AACA;;AAEAvH,WAAUuI,KAAV,GAAkB,YAAY;AAC7B,MAAIvI,UAAUjC,EAAV,CAAakK,cAAjB,EAAiC;AAChC;AACA;AACD,MAAI,KAAKjK,QAAL,CAAc4F,QAAd,CAAuB,CAAvB,KAA6B,KAAK5F,QAAL,CAAc4F,QAAd,CAAuB,CAAvB,EAA0BzF,QAAvD,IAAmE,CAAC,KAAKH,QAAL,CAAc4F,QAAd,CAAuB,CAAvB,EAA0BzF,QAA1B,CAAmCL,OAA3G,EAAoH;AACnH;AACA;AACDmC,MAAIsI,KAAJ,CAAUvI,UAAUjC,EAApB;AACA,MAAI,KAAKuH,YAAL,CAAkB,UAAlB,MAAkC,UAAtC,EAAkD;AACjD,QAAK/G,YAAL,CAAkB,OAAlB,EAA2BsH,OAAO4B,wBAAlC;AACA,GAFD,MAEO;AACN,QAAKlJ,YAAL,CAAkB,OAAlB,EAA2BsH,OAAOyB,mBAAlC;AACA;AACD,EAbD;;AAeA;AACA;;AAEAtH,WAAUsI,MAAV,GAAmB,YAAY;AAC9B,OAAKtK,QAAL,CAAc+J,QAAd,CAAuBc,CAAvB,GAA2B,CAA3B;AACA,MAAI,KAAKvD,YAAL,CAAkB,UAAlB,MAAkC,UAAtC,EAAkD;AACjD,QAAK/G,YAAL,CAAkB,OAAlB,EAA2BsH,OAAO0B,gBAAlC;AACA,GAFD,MAEO;AACN,QAAKhJ,YAAL,CAAkB,OAAlB,EAA2BsH,OAAOE,cAAlC;AACA;AACD,EAPD;;AASA;AACA;;AAEA/F,WAAUwI,cAAV,GAA2B,KAA3B;AACAxI,WAAU0I,WAAV,GAAwB,YAAY;AACnC1I,YAAUwI,cAAV,GAA2B,CAACxI,UAAUwI,cAAtC;;AAEA,MAAIrB,UAAUnH,UAAUjC,EAAV,CAAaqJ,QAAb,CAAsB7D,aAAtB,CAAoC,aAApC,CAAd;AACA,MAAIvD,UAAUwI,cAAd,EAA8B;AAC7BrB,WAAQ5I,YAAR,CAAqB,KAArB,EAA4B,4BAA5B;AACA,GAFD,MAEO;AACN4I,WAAQ5I,YAAR,CAAqB,KAArB,EAA4B,sBAA5B;AACA;;AARkC;AAAA;AAAA;;AAAA;AAUnC,yBAAkBuD,SAAShD,gBAAT,CAA0B,UAA1B,CAAlB,mIAAyD;AAAA,QAAhDgK,KAAgD;;AACxD,QAAI5C,SAAS4C,MAAMxD,YAAN,CAAmB,QAAnB,CAAb;AAAA,QAA2CyD,WAAWD,MAAMxD,YAAN,CAAmB,UAAnB,CAAtD;AACA,QAAIY,OAAO8C,UAAP,CAAkB,OAAlB,KAA8BD,aAAa,MAA/C,EAAuD;AACtD,SAAIE,SAASH,MAAMvF,aAAN,CAAoB,QAApB,CAAb;AACA,SAAI0F,MAAJ,EAAY;AACX,UAAI9C,QAAQ8C,OAAO3D,YAAP,CAAoB,OAApB,EAA6B4D,WAA7B,EAAZ;AACA,UAAI,KAAKV,cAAT,EAAyB;AACxBrC,eAAQA,MAAMsC,WAAN,EAAR;AACA;AACDQ,aAAO1K,YAAP,CAAoB,OAApB,EAA6B4H,KAA7B;AACA;AACD;AACD;AAtBkC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAuBnC,EAvBD;;AAyBA;AACA;;AAEAnG,WAAU2I,SAAV,GAAsB,KAAtB;AACA3I,WAAU4I,aAAV,GAA0B,YAAY;AACrC5I,YAAU2I,SAAV,GAAsB,CAAC3I,UAAU2I,SAAjC;AACA,MAAI,CAAC3I,UAAU2I,SAAf,EAA0B;AACzB,OAAIf,SAAS5H,UAAUjC,EAAV,CAAa4C,aAAb,CAA2BkH,UAAxC;AACAD,UAAOI,WAAP,CAAmBhI,UAAUjC,EAAV,CAAa4C,aAAhC;AACAiH,UAAOhH,WAAP,CAAmBZ,UAAUjC,EAAV,CAAa2C,kBAAhC;AACAyH,cAAW,YAAY;AACtBtI,UAAMsF,aAAN,CAAoBnF,UAAUjC,EAAV,CAAa2C,kBAAjC,EAAqD,CAArD;AACA,IAFD,EAEG,CAFH;AAGA,GAPD,MAOO;AACN,OAAIkH,UAAS5H,UAAUjC,EAAV,CAAa2C,kBAAb,CAAgCmH,UAA7C;AACAD,WAAOI,WAAP,CAAmBhI,UAAUjC,EAAV,CAAa2C,kBAAhC;AACAkH,WAAOhH,WAAP,CAAmBZ,UAAUjC,EAAV,CAAa4C,aAAhC;AACA;AACD,EAdD;;AAiBApB,QAAOC,OAAP,GAAiBQ,SAAjB,C;;;;;;;;AChQA,KAAMC,MAAM;;AAEVpB,SAAM,cAAS+I,MAAT,EAAiB;AACrB,SAAI7J,KAAK+D,SAAS4B,aAAT,CAAuB,SAAvB,CAAT;AACA3F,QAAGQ,YAAH,CAAgB,KAAhB,EAAuB,0BAAvB;AACAR,QAAGQ,YAAH,CAAgB,KAAhB,EAAuB,IAAvB;AACAR,QAAGQ,YAAH,CAAgB,KAAhB,EAAuB,sBAAvB;AACAR,QAAGQ,YAAH,CAAgB,UAAhB,EAA4B,OAA5B;AACAqJ,YAAOhH,WAAP,CAAmB7C,EAAnB;;AAEAA,UAAK+D,SAAS4B,aAAT,CAAuB,SAAvB,CAAL;AACA3F,QAAGQ,YAAH,CAAgB,KAAhB,EAAuB,4BAAvB;AACAR,QAAGQ,YAAH,CAAgB,KAAhB,EAAuB,IAAvB;AACAR,QAAGQ,YAAH,CAAgB,KAAhB,EAAuB,wBAAvB;AACAR,QAAGQ,YAAH,CAAgB,UAAhB,EAA4B,OAA5B;AACAqJ,YAAOhH,WAAP,CAAmB7C,EAAnB;AACD,IAhBS;;AAkBVwK,UAAO,eAASX,MAAT,EAAiB;AACtB,SAAI7J,KAAK6J,OAAOrE,aAAP,CAAqB,gCAArB,CAAT;AACA,SAAI,CAACxF,EAAL,EAAS;AAAE;AAAS;AACpBA,QAAG2H,UAAH,CAAcyD,KAAd,CAAoBC,SAApB;AACArL,QAAG2H,UAAH,CAAcyD,KAAd,CAAoBE,SAApB;AACD,IAvBS;;AAyBVhB,YAAS,iBAAST,MAAT,EAAiB;AACxB,SAAI7J,KAAK6J,OAAOrE,aAAP,CAAqB,kCAArB,CAAT;AACA,SAAI,CAACxF,EAAL,EAAS;AAAE;AAAS;AACpBA,QAAG2H,UAAH,CAAcyD,KAAd,CAAoBC,SAApB;AACArL,QAAG2H,UAAH,CAAcyD,KAAd,CAAoBE,SAApB;AACD;AA9BS,EAAZ;;AAiCA9J,QAAOC,OAAP,GAAiBS,GAAjB,C;;;;;;;;ACjCA,KAAMJ,QAAQ,mBAAAlC,CAAQ,CAAR,CAAd;AACA,KAAMC,QAAQ,mBAAAD,CAAQ,CAAR,CAAd;;AAEA;;;;;AAKAJ,QAAOiB,iBAAP,CAAyB,OAAzB,EAAkC;AAChCC,WAAQ;AACN0H,YAAO,EAAExH,MAAM,QAAR,EAAkBC,SAAS,EAA3B,EADD;AAENa,WAAM,EAAEd,MAAM,QAAR,EAAkBC,SAAS,EAA3B,EAFA;AAGN0K,eAAU,EAAE3K,MAAM,SAAR,EAAmBC,SAAS,KAA5B,EAHJ;AAIN2K,YAAO,EAAE5K,MAAM,OAAR,EAAiBC,SAAS,MAA1B,EAJD;AAKN4K,YAAO,EAAE7K,MAAM,QAAR,EAAkBC,SAAS,MAA3B,EALD;AAMN6K,WAAM,EAAE9K,MAAM,QAAR,EAAkBC,SAAS,EAA3B,EANA;AAON8K,oBAAe,EAAE/K,MAAM,KAAR,EAAeC,SAAS,CAAxB,EAPT;AAQN+K,iBAAY,EAAEhL,MAAM,QAAR,EAAkBC,SAAS,EAA3B,EARN;AASNd,cAAS,EAAEa,MAAM,QAAR,EAAkBC,SAAS,CAA3B,EATH;AAUNgL,WAAM,EAAEjL,MAAM,QAAR,EAAkBC,SAAS,OAA3B,EAVA;AAWNiL,cAAS,EAAElL,MAAM,KAAR,EAAeC,SAAS,CAAxB,EAXH;AAYNkL,kBAAa,EAAEnL,MAAM,QAAR,EAAkBC,SAAS,EAA3B,EAZP;AAaNmL,uBAAkB,EAAEpL,MAAM,OAAR,EAAiBC,SAAS,MAA1B,EAbZ;AAcNoL,gBAAW,EAAErL,MAAM,KAAR,EAAeC,SAAS,CAAxB,EAdL;AAeND,WAAM,EAAEA,MAAM,QAAR,EAAkBC,SAAS,MAA3B,EAfA;AAgBNqL,YAAO,EAAEtL,MAAM,QAAR,EAAkBC,SAAS,CAA3B,EAhBD;AAiBNsL,kBAAa,EAAEvL,MAAM,QAAR,EAAkBC,SAAS,IAA3B,EAjBP;AAkBNuL,mBAAc,EAAExL,MAAM,QAAR,EAAkBC,SAAS,IAA3B,EAlBR;AAmBNwL,kBAAa,EAAEzL,MAAM,OAAR,EAAiBC,SAAS,SAA1B,EAnBP;AAoBNyL,sBAAiB,EAAE1L,MAAM,OAAR,EAAiBC,SAAS,MAA1B,EApBX;AAqBN0L,wBAAmB,EAAE3L,MAAM,QAAR,EAAkBC,SAAS,CAA3B;AArBb,IADwB;;AAyBhCC,SAAM,gBAAY;AAChB,SAAIwB,OAAO,IAAX;;AAEA,UAAKkK,UAAL,GAAkBzI,SAAS4B,aAAT,CAAuB,WAAvB,CAAlB;AACA,UAAK6G,UAAL,CAAgBhM,YAAhB,CAA6B,QAA7B,EAAuC,IAAvC;AACA,UAAKgM,UAAL,CAAgBhM,YAAhB,CAA6B,QAA7B,EAAuC,IAAvC;AACA,UAAKgM,UAAL,CAAgBhM,YAAhB,CAA6B,MAA7B,EAAqC,QAArC;AACA,UAAKR,EAAL,CAAQ6C,WAAR,CAAoB,KAAK2J,UAAzB;;AAEA,UAAKC,MAAL,GAAc1I,SAAS4B,aAAT,CAAuB,SAAvB,CAAd;AACA,UAAK8G,MAAL,CAAYjM,YAAZ,CAAyB,UAAzB,EAAqC,WAArC;AACA,UAAKiM,MAAL,CAAYjM,YAAZ,CAAyB,SAAzB,EAAoC,KAApC;AACA,UAAKR,EAAL,CAAQ6C,WAAR,CAAoB,KAAK4J,MAAzB;;AAEA,UAAKlM,IAAL,GAAYwD,SAAS4B,aAAT,CAAuB,UAAvB,CAAZ;AACA,UAAK3F,EAAL,CAAQ6C,WAAR,CAAoB,KAAKtC,IAAzB;;AAEA,UAAKwL,WAAL,GAAmBhI,SAAS4B,aAAT,CAAuB,UAAvB,CAAnB;AACA,UAAKoG,WAAL,CAAiBvL,YAAjB,CAA8B,SAA9B,EAAyC,KAAzC;AACA,UAAKR,EAAL,CAAQ6C,WAAR,CAAoB,KAAKkJ,WAAzB;;AAEA,UAAK/L,EAAL,CAAQ0M,KAAR,GAAgB,KAAKA,KAAL,CAAW9I,IAAX,CAAgB,IAAhB,CAAhB;AACA,UAAK5D,EAAL,CAAQ4E,IAAR,GAAe,KAAKA,IAAL,CAAUhB,IAAV,CAAe,IAAf,CAAf;AACA,UAAK5D,EAAL,CAAQ0E,YAAR,GAAuB,KAAKA,YAAL,CAAkBd,IAAlB,CAAuB,IAAvB,CAAvB;AACA,UAAK5D,EAAL,CAAQ2E,UAAR,GAAqB,KAAKA,UAAL,CAAgBf,IAAhB,CAAqB,IAArB,CAArB;;AAEA;AACA,UAAK+I,KAAL;;AAEA,UAAK3M,EAAL,CAAQ0D,gBAAR,CAAyB,OAAzB,EAAkC,YAAW;AAC3C,WAAI,KAAKiE,UAAL,CAAgBiF,KAAhB,CAAsBvL,IAAtB,CAA2BkK,QAA/B,EAAyC;AAAE;AAAS;AACpDjJ,YAAKoK,KAAL;AACD,MAHD;;AAKA/F,YAAOO,cAAP,CAAsB,KAAKlH,EAA3B,EAA+B,OAA/B,EAAwC;AACtC6M,YAAK,eAAW;AAAE,gBAAO,KAAKtF,YAAL,CAAkB,OAAlB,CAAP;AAAoC,QADhB;AAEtCuF,YAAK,aAAS1E,KAAT,EAAgB;AAAE,cAAK5H,YAAL,CAAkB,OAAlB,EAA2B4H,KAA3B;AAAoC,QAFrB;AAGtC2E,mBAAY,IAH0B;AAItCC,qBAAc;AAJwB,MAAxC;AAMD,IAjE+B;AAkEhCL,UAAO,iBAAW;AAChB,SAAIrK,OAAO,IAAX;AACA,SAAI,CAAC,KAAK2K,SAAV,EAAqB;AACnB3K,YAAKmK,MAAL,CAAYjM,YAAZ,CAAyB,SAAzB,EAAoC,KAApC;AACA0M,qBAAc,KAAKC,cAAnB;AACA,YAAKA,cAAL,GAAsB,IAAtB;AACA;AACD;AACD,UAAKA,cAAL,GAAsBC,YAAY,YAAU;AAC1C9K,YAAKmK,MAAL,CAAYjM,YAAZ,CAAyB,SAAzB,EAAoC,CAAC8B,KAAKmK,MAAL,CAAYlF,YAAZ,CAAyB,SAAzB,CAArC;AACD,MAFqB,EAEnB,GAFmB,CAAtB;AAGD,IA7E+B;AA8EhC0F,cAAW,KA9EqB;AA+EhCP,UAAO,eAASW,MAAT,EAAiB;AACtB,SAAI,KAAKJ,SAAT,EAAoB;AAAE;AAAS;AAC/B,UAAKA,SAAL,GAAiB,IAAjB;AACA,UAAKR,MAAL,CAAYjM,YAAZ,CAAyB,SAAzB,EAAoC,IAApC;AACA,UAAKmM,KAAL;AACA9M,WAAM0B,IAAN,CAAW,KAAKvB,EAAhB,EAAoB,OAApB;AACA,SAAI,CAACqN,MAAL,EAAa;AAAExN,aAAM0B,IAAN,CAAWwC,SAASE,IAApB,EAA0B,eAA1B,EAA2C,KAAKjE,EAAhD;AAAsD;AACtE,IAtF+B;AAuFhC4E,SAAM,cAASyI,MAAT,EAAiB;AACrB,SAAI,CAAC,KAAKJ,SAAV,EAAqB;AAAE;AAAS;AAChC,UAAKA,SAAL,GAAiB,KAAjB;AACA,SAAI,KAAKE,cAAT,EAAyB;AACvBD,qBAAc,KAAKC,cAAnB;AACA,YAAKA,cAAL,GAAsB,IAAtB;AACD;AACD,UAAKV,MAAL,CAAYjM,YAAZ,CAAyB,SAAzB,EAAoC,KAApC;AACAX,WAAM0B,IAAN,CAAW,KAAKvB,EAAhB,EAAoB,MAApB;AACA,SAAI,CAACqN,MAAL,EAAa;AAAExN,aAAM0B,IAAN,CAAWwC,SAASE,IAApB,EAA0B,cAA1B,EAA0C,KAAKjE,EAA/C;AAAqD;AACrE,IAjG+B;AAkGhC0E,iBAAc,sBAASrD,IAAT,EAAe;AAC3B,SAAGA,SAAS,IAAZ,EAAkB;AAChB,cAAO,KAAKuD,IAAL,EAAP;AACD;AACD,SAAI0I,MAAM,KAAKtN,EAAL,CAAQuH,YAAR,CAAqB,OAArB,CAAV;AACA,SAAI,CAAC+F,GAAL,EAAU;AAAEA,aAAM,EAAN;AAAU;AACtBA,WAAMA,MAAIjM,IAAV;AACA,UAAKrB,EAAL,CAAQQ,YAAR,CAAqB,OAArB,EAA8B8M,GAA9B;AACAzN,WAAM0B,IAAN,CAAW,KAAKvB,EAAhB,EAAoB,QAApB,EAA8BsN,GAA9B;AACD,IA3G+B;AA4GhC3I,eAAY,sBAAW;AACrB,SAAI2I,MAAM,KAAKtN,EAAL,CAAQuH,YAAR,CAAqB,OAArB,CAAV;AACA,SAAI,CAAC+F,GAAL,EAAU;AAAEA,aAAM,EAAN;AAAU;AACtBA,WAAMA,IAAI5G,KAAJ,CAAU,CAAV,EAAa,CAAC,CAAd,CAAN;AACA,UAAK1G,EAAL,CAAQQ,YAAR,CAAqB,OAArB,EAA8B8M,GAA9B;AACAzN,WAAM0B,IAAN,CAAW,KAAKvB,EAAhB,EAAoB,QAApB,EAA8BsN,GAA9B;AACD,IAlH+B;AAmHhCC,eAAY,sBAAW;AACrB,SAAIjL,OAAO,IAAX;AACA,SAAIkL,UAAU;AACZC,aAAM,KADM;AAEZC,cAAO;AAFK,MAAd;;AAKA,SAAIpG,QAAQ;AACVkE,cAAO,KAAKnK,IAAL,CAAUmK,KADP;AAEVC,cAAO,KAAKpK,IAAL,CAAUoK,KAFP;AAGVI,aAAM,KAAKxK,IAAL,CAAUwK,IAHN;AAIVC,gBAAS,KAAKzK,IAAL,CAAUyK,OAJT;AAKVrE,kBAAW,KAAG,KAAKpG,IAAL,CAAU6K,KALd;AAMVA,cAAO,KAAK7K,IAAL,CAAU6K;;AAGnB;AACA;AAVY,MAAZ,CAWA,IAAIyB,OAAO,KAAKpN,IAAL,CAAUgH,YAAV,CAAuB,MAAvB,CAAX;AACA,SAAIoG,IAAJ,EAAU;AACR,WAAI,KAAKtM,IAAL,CAAU+G,KAAV,KAAoBuF,KAAKvF,KAA7B,EAAoC;AAClC,aAAI,KAAK+E,cAAT,EAAyB;AACvBD,yBAAc,KAAKC,cAAnB;AACA,gBAAKA,cAAL,GAAsB,IAAtB;AACD;AACD,aAAI,KAAKS,WAAT,EAAsB;AACpBC,wBAAa,KAAKD,WAAlB;AACA,gBAAKA,WAAL,GAAmB,IAAnB;AACD;AACD,cAAKnB,MAAL,CAAYjM,YAAZ,CAAyB,SAAzB,EAAoC,IAApC;AACA,cAAKoN,WAAL,GAAmBxD,WAAW,YAAU;AACtC9H,gBAAKqK,KAAL;AACD,UAFkB,EAEhB,EAFgB,CAAnB;AAGD;AACF;;AAED;AACA,SAAI,KAAKtL,IAAL,CAAU4K,SAAd,EAAyB;AACvB3E,aAAMc,KAAN,GAAc,KAAK/G,IAAL,CAAU+G,KAAV,CAAgB0F,SAAhB,CAA0B,CAA1B,EAA6B,KAAKzM,IAAL,CAAU4K,SAAvC,CAAd;AACA,YAAKjM,EAAL,CAAQQ,YAAR,CAAqB,OAArB,EAA8B8G,MAAMc,KAApC;AACD,MAHD,MAGO;AACLd,aAAMc,KAAN,GAAc,KAAK/G,IAAL,CAAU+G,KAAxB;AACD;;AAED,SAAI,KAAK/G,IAAL,CAAUT,IAAV,KAAmB,UAAvB,EAAmC;AACjC0G,aAAMc,KAAN,GAAc,IAAI2F,MAAJ,CAAW,KAAK1M,IAAL,CAAU+G,KAAV,CAAgBnD,MAA3B,CAAd;AACD;;AAED,SAAI,KAAK5D,IAAL,CAAUqK,IAAV,CAAezG,MAAnB,EAA2B;AAAEqC,aAAMoE,IAAN,GAAa,KAAKrK,IAAL,CAAUqK,IAAvB;AAA6B;AAC1D,SAAI,KAAKrK,IAAL,CAAUsK,aAAd,EAA6B;AAAErE,aAAMqE,aAAN,GAAsB,KAAKtK,IAAL,CAAUsK,aAAhC;AAAgD;AAC/E,SAAI,KAAKtK,IAAL,CAAUuK,UAAV,CAAqB3G,MAAzB,EAAiC;AAAEqC,aAAMsE,UAAN,GAAmB,KAAKvK,IAAL,CAAUuK,UAA7B;AAA0C;AAC7E,UAAKrL,IAAL,CAAUC,YAAV,CAAuB,SAAvB,EAAkC,KAAlC;AACA,UAAKD,IAAL,CAAUC,YAAV,CAAuB,MAAvB,EAA+B8G,KAA/B;;AAEA,cAAS0G,YAAT,CAAsBhO,EAAtB,EAA0BqB,IAA1B,EAAgC4M,SAAhC,EAA2CC,YAA3C,EAAyD;AACvD,WAAI,CAAClO,GAAGC,QAAJ,IAAgB,CAACD,GAAGC,QAAH,CAAY4F,QAA7B,IAAyC,CAAC7F,GAAGC,QAAH,CAAY4F,QAAZ,CAAqB,CAArB,CAA9C,EAAuE;AAAE,gBAAO,CAAP;AAAW;AACpF,WAAIsI,IAAInO,GAAGC,QAAH,CAAY4F,QAAZ,CAAqB,CAArB,EAAwBuI,QAAxB,CAAiCC,aAAzC;AACA,WAAI,CAACF,CAAL,EAAQ;AAAE,gBAAO,CAAP;AAAW;AACrBA,WAAIA,EAAEA,EAAElJ,MAAF,GAAS,CAAX,CAAJ;AACA,WAAI,CAACkJ,CAAL,EAAQ;AAAE,gBAAO,CAAP;AAAW;AACrB,WAAIA,EAAEG,IAAN,EAAY;AACV,aAAIL,SAAJ,EAAe;AACb5M,gBAAK+G,KAAL,GAAa/G,KAAK+G,KAAL,CAAWmG,MAAX,CAAkB,CAAlB,CAAb;AACD,UAFD,MAEO;AACLlN,gBAAK+G,KAAL,GAAa/G,KAAK+G,KAAL,CAAW1B,KAAX,CAAiB,CAAjB,EAAoB,CAAC,CAArB,CAAb;AACD;AACD1G,YAAGQ,YAAH,CAAgB,MAAhB,EAAwBa,IAAxB;AACA,gBAAO2M,aAAahO,EAAb,EAAiBqB,IAAjB,EAAuB4M,SAAvB,CAAP;AACD,QARD,MAQO;AACL,aAAI,CAACC,YAAL,EAAmB;AAAEA,0BAAepM,MAAM0F,cAAN,CAAqBxH,EAArB,EAAyBqB,KAAKoG,SAA9B,CAAf;AAA0D;AAC/E0G,aAAI,CAACA,EAAEnE,QAAF,CAAW,CAAX,IAAgBmE,EAAE9M,IAAF,CAAO6K,KAAxB,KAAkCgC,eAAa5L,KAAKjB,IAAL,CAAU6K,KAAzD,CAAJ;AACA,aAAIsC,YAAY,CAACL,IAAEX,QAAQC,IAAV,GAAeD,QAAQE,KAAxB,IAAiCpL,KAAKjB,IAAL,CAAU6K,KAA3D;;AAEA,aAAIsC,YAAY,CAAhB,EAAmB;AACjB,eAAIP,SAAJ,EAAe;AACb5M,kBAAK+G,KAAL,GAAa/G,KAAK+G,KAAL,CAAWmG,MAAX,CAAkB,CAAlB,CAAb;AACD,YAFD,MAEO;AACLlN,kBAAK+G,KAAL,GAAa/G,KAAK+G,KAAL,CAAW1B,KAAX,CAAiB,CAAjB,EAAoB,CAAC,CAArB,CAAb;AACD;AACD1G,cAAGQ,YAAH,CAAgB,MAAhB,EAAwBa,IAAxB;AACA,kBAAO2M,aAAahO,EAAb,EAAiBqB,IAAjB,EAAuB4M,SAAvB,EAAkCC,YAAlC,CAAP;AACD;AACF;AACD,cAAOC,CAAP;AACD;;AAGD,SAAI7G,MAAMc,KAAN,CAAYnD,MAAhB,EAAwB;AACtB,YAAK8G,WAAL,CAAiBvL,YAAjB,CAA8B,SAA9B,EAAyC,KAAzC;AACD,MAFD,MAEO;AACL,YAAKuL,WAAL,CAAiBvL,YAAjB,CAA8B,SAA9B,EAAyC,IAAzC;AACD;;AAED,SAAIiO,oBAAoB3M,MAAMwE,KAAN,CAAYgB,KAAZ,CAAxB;AACAmH,uBAAkBrG,KAAlB,GAA0B,KAAK/G,IAAL,CAAU0K,WAApC;AACA0C,uBAAkBjD,KAAlB,GAA0B,KAAKnK,IAAL,CAAU2K,gBAApC;AACA,UAAKD,WAAL,CAAiBvL,YAAjB,CAA8B,MAA9B,EAAsCiO,iBAAtC;;AAEArE,gBAAW,YAAW;AACpB,WAAI9H,KAAK/B,IAAL,CAAUN,QAAd,EAAwB;AACtB,aAAI4F,WAAWvD,KAAK/B,IAAL,CAAUN,QAAV,CAAmB4F,QAAlC;AACA,aAAIA,SAAS,CAAT,KAAeA,SAAS,CAAT,EAAYuI,QAA3B,IAAuCvI,SAAS,CAAT,EAAYuI,QAAZ,CAAqBC,aAAhE,EAA+E;AAC7E,eAAIF,IAAI,CAAR;AACA,eAAItI,SAAS,CAAT,EAAYuI,QAAZ,CAAqBC,aAArB,CAAmCpJ,MAAvC,EAA+C;AAC7CkJ,iBAAIH,aAAa1L,KAAK/B,IAAlB,EAAwB+G,KAAxB,EAA+B,IAA/B,CAAJ;AACAhF,kBAAK/B,IAAL,CAAUC,YAAV,CAAuB,SAAvB,EAAkC,IAAlC;AACD;AACD8B,gBAAKmK,MAAL,CAAYjM,YAAZ,CAAyB,UAAzB,EAAqC2N,IAAEX,QAAQC,IAAV,GAAe,UAApD;AACD,UAPD,MAOO;AACLnL,gBAAKmK,MAAL,CAAYjM,YAAZ,CAAyB,UAAzB,EAAqCgN,QAAQC,IAAR,GAAa,UAAlD;AACD;AACF,QAZD,MAYO;AAAGnL,cAAKmK,MAAL,CAAYjM,YAAZ,CAAyB,UAAzB,EAAqCgN,QAAQC,IAAR,GAAa,UAAlD;AAAgE;AAC1EO,oBAAa1L,KAAKyJ,WAAlB,EAA+B0C,iBAA/B;AACD,MAfD,EAeG,CAfH;;AAiBA,UAAKjC,UAAL,CAAgBhM,YAAhB,CAA6B,OAA7B,EAAsC,KAAKa,IAAL,CAAUiL,eAAhD;AACA;;;;;AAKA,UAAKE,UAAL,CAAgBhM,YAAhB,CAA6B,OAA7B,EAAsC,KAAKa,IAAL,CAAU6K,KAAhD;AACA;AACA,UAAKM,UAAL,CAAgBhM,YAAhB,CAA6B,UAA7B,EAAyC,eAAzC;AACA,UAAKD,IAAL,CAAUC,YAAV,CAAuB,UAAvB,EAAmCgN,QAAQC,IAAR,GAAa,KAAb,GAAmB,KAAKpM,IAAL,CAAU6K,KAAV,GAAgB,CAAnC,GAAqC,UAAxE;AACA,UAAKH,WAAL,CAAiBvL,YAAjB,CAA8B,UAA9B,EAA0CgN,QAAQC,IAAR,GAAa,KAAb,GAAmB,KAAKpM,IAAL,CAAU6K,KAAV,GAAgB,CAAnC,GAAqC,UAA/E;AACD,IAjP+B;AAkPhCwC,iBAAc,wBAAW;AACvB,UAAKjC,MAAL,CAAYjM,YAAZ,CAAyB,OAAzB,EAAkC,KAAKa,IAAL,CAAU8K,WAA5C;AACA,UAAKM,MAAL,CAAYjM,YAAZ,CAAyB,QAAzB,EAAmC,KAAKa,IAAL,CAAU+K,YAA7C;AACA,UAAKK,MAAL,CAAYjM,YAAZ,CAAyB,OAAzB,EAAkC,KAAKa,IAAL,CAAUgL,WAA5C;AACD,IAtP+B;AAuPhCjI,WAAQ,kBAAY;AAClB,SAAI9B,OAAO,IAAX;AACA8H,gBAAW,YAAW;AACtB;AACC,MAFD,EAEG,CAFH;;AAIA,UAAKsE,YAAL;AACA,UAAKnB,UAAL;AACD,IA/P+B;AAgQhCtM,SAAM,gBAAY,CAAE,CAhQY;AAiQhCoD,WAAQ,kBAAY,CAAE,CAjQU;AAkQhCE,UAAO,iBAAY,CAAE,CAlQW;AAmQhCC,SAAM,gBAAY,CAAE;AAnQY,EAAlC;;AAsQAhF,QAAO0F,iBAAP,CAAyB,SAAzB,EAAoC;AAClCC,sBAAmB;AACjByH,YAAO;AADU,IADe;AAIlCvH,aAAU;AACR+C,YAAO,aADC;AAER1G,WAAM,YAFE;AAGR6J,eAAU,gBAHF;AAIRC,YAAO,aAJC;AAKRC,YAAO,aALC;AAMRC,WAAM,YANE;AAOR,uBAAkB,qBAPV;AAQR,oBAAe,kBARP;AASR,gBAAW,eATH;AAUR,aAAQ,YAVA;AAWR,iBAAY,eAXJ;AAYRK,kBAAa,mBAZL;AAaR,0BAAqB,wBAbb;AAcR,mBAAc,iBAdN;AAeRnL,WAAM,YAfE;AAgBRsL,YAAO,aAhBC;AAiBR,qBAAgB,mBAjBR;AAkBR,sBAAiB,oBAlBT;AAmBR,qBAAgB,mBAnBR;AAoBR,yBAAoB,uBApBZ;AAqBR,2BAAsB;AArBd;AAJwB,EAApC,E;;;;;;;;AC9QA,KAAMpK,QAAQ,mBAAAlC,CAAQ,CAAR,CAAd;AACA,KAAMC,QAAQ,mBAAAD,CAAQ,CAAR,CAAd;AACA,KAAMmC,SAAS,mBAAAnC,CAAQ,EAAR,CAAf;AACA,KAAMsC,MAAM,mBAAAtC,CAAQ,EAAR,CAAZ;;AAEAJ,QAAOiB,iBAAP,CAAyB,QAAzB,EAAmC;AACjCC,WAAQ;AACN6K,eAAU,EAAE3K,MAAM,SAAR,EAAmBC,SAAS,KAA5B,EADJ;AAEND,WAAM,EAAEA,MAAM,QAAR,EAAkBC,SAAS,QAA3B,EAFA;AAGNa,WAAM,EAAEd,MAAM,QAAR,EAAkBC,SAAS,EAA3B,EAHA;AAINuH,YAAO,EAAExH,MAAM,QAAR,EAAkBC,SAAS,QAA3B,EAJD;AAKN8N,kBAAa,EAAE/N,MAAM,OAAR,EAAiBC,SAAS,SAA1B,EALP;AAMN2K,YAAO,EAAE5K,MAAM,OAAR,EAAiBC,SAAS,MAA1B,EAND;AAON6K,WAAM,EAAE9K,MAAM,QAAR,EAAkBC,SAAS,EAA3B,EAPA;AAQN8K,oBAAe,EAAE/K,MAAM,KAAR,EAAeC,SAAS,CAAxB,EART;AASN+K,iBAAY,EAAEhL,MAAM,QAAR,EAAkBC,SAAS,EAA3B,EATN;AAUNd,cAAS,EAAEa,MAAM,QAAR,EAAkBC,SAAS,CAA3B,EAVH;AAWNqL,YAAO,EAAEtL,MAAM,QAAR,EAAkBC,SAAS,CAA3B;AAXD,IADyB;AAcjCC,SAAM,gBAAY;AAChB,SAAIwB,OAAO,IAAX;;AAEA;AACAR,WAAMS,aAAN,CAAqBR,MAArB;;AAEA;AACAG,SAAIpB,IAAJ,CAAS,KAAKd,EAAd;;AAEA,UAAK+H,OAAL,GAAehE,SAAS4B,aAAT,CAAuB,UAAvB,CAAf;AACA,UAAKoC,OAAL,CAAavH,YAAb,CAA0B,UAA1B,EAAsC,UAAtC;AACA,UAAKR,EAAL,CAAQ6C,WAAR,CAAoB,KAAKkF,OAAzB;;AAEA,UAAK6G,MAAL,GAAc7K,SAAS4B,aAAT,CAAuB,SAAvB,CAAd;AACA,UAAKiJ,MAAL,CAAYpO,YAAZ,CAAyB,QAAzB,EAAmC,OAAK,IAAxC;AACA,UAAKoO,MAAL,CAAYpO,YAAZ,CAAyB,KAAzB,EAAgC,qBAAhC;AACA,UAAKuH,OAAL,CAAalF,WAAb,CAAyB,KAAK+L,MAA9B;;AAEA;AACA,UAAKC,OAAL,GAAe9K,SAAS4B,aAAT,CAAuB,WAAvB,CAAf;AACA,UAAKkJ,OAAL,CAAarO,YAAb,CAA0B,QAA1B,EAAoC,IAApC;AACA,UAAKqO,OAAL,CAAarO,YAAb,CAA0B,QAA1B,EAAoC,IAApC;AACA,UAAKqO,OAAL,CAAarO,YAAb,CAA0B,UAA1B,UAA4C,OAAK,CAAjD;AACA,UAAKuH,OAAL,CAAalF,WAAb,CAAyB,KAAKgM,OAA9B;;AAEA;AACA,UAAKC,KAAL,GAAa/K,SAAS4B,aAAT,CAAuB,UAAvB,CAAb;AACA,UAAKkJ,OAAL,CAAahM,WAAb,CAAyB,KAAKiM,KAA9B;;AAEA;AACA,UAAK9O,EAAL,CAAQ0D,gBAAR,CAAyB,OAAzB,EAAkC,YAAW;AAC3C,WAAI,KAAKiE,UAAL,CAAgBoH,MAAhB,IAA0B,KAAKpH,UAAL,CAAgBoH,MAAhB,CAAuB1N,IAAvB,CAA4BkK,QAA1D,EAAoE;AAAE;AAAS;AAC/EjJ,YAAK0M,OAAL;AACD,MAHD;AAIA,UAAKhP,EAAL,CAAQ0D,gBAAR,CAAyB,WAAzB,EAAsC,YAAW;AAC/C,WAAI,KAAKiE,UAAL,CAAgBoH,MAAhB,IAA0B,KAAKpH,UAAL,CAAgBoH,MAAhB,CAAuB1N,IAAvB,CAA4BkK,QAA1D,EAAoE;AAClE,gBAAOrJ,IAAI+M,aAAJ,CAAkB,IAAlB,CAAP;AACD;AACD3M,YAAKyF,OAAL,CAAavH,YAAb,CAA0B,UAA1B;AACA0B,WAAIgN,KAAJ,CAAU,IAAV;AACD,MAND;AAOA,UAAKlP,EAAL,CAAQ0D,gBAAR,CAAyB,SAAzB,EAAoC,YAAW;AAC7C,WAAI,KAAKiE,UAAL,CAAgBoH,MAAhB,IAA0B,KAAKpH,UAAL,CAAgBoH,MAAhB,CAAuB1N,IAAvB,CAA4BkK,QAA1D,EAAoE;AAAE;AAAS;AAC/EjJ,YAAKyF,OAAL,CAAavH,YAAb,CAA0B,UAA1B;AACD,MAHD;;AAKA,UAAKR,EAAL,CAAQmP,QAAR,GAAmB,KAAKA,QAAL,CAAcvL,IAAd,CAAmB,IAAnB,CAAnB;AACA+C,YAAOO,cAAP,CAAsB,KAAKlH,EAA3B,EAA+B,OAA/B,EAAwC;AACtC6M,YAAK,eAAW;AAAE,gBAAO,KAAKtF,YAAL,CAAkB,OAAlB,CAAP;AAAoC,QADhB;AAEtCuF,YAAK,aAAS1E,KAAT,EAAgB;AAAE,cAAK5H,YAAL,CAAkB,OAAlB,EAA2B4H,KAA3B;AAAoC,QAFrB;AAGtC2E,mBAAY,IAH0B;AAItCC,qBAAc;AAJwB,MAAxC;AAMD,IAnEgC;AAoEjCgC,YAAS,mBAAW;AAClB;AACD,IAtEgC;AAuEjCG,aAAU,oBAAW;AACnB,YAAO,KAAKC,OAAZ;AACD,IAzEgC;AA0EjChL,WAAQ,kBAAY;AAClB,SAAI9B,OAAO,IAAX;AACA,UAAKuM,OAAL,CAAarO,YAAb,CAA0B,OAA1B,EAAmC,KAAKa,IAAL,CAAUsN,WAA7C;;AAEA,SAAIrH,QAAQ;AACVkE,cAAO,KAAKnK,IAAL,CAAUmK,KADP;AAEVC,cAAO,QAFG;AAGVhE,kBAAW,KAAG,KAAKpG,IAAL,CAAU6K,KAHd;AAIVA,cAAO,KAAK7K,IAAL,CAAU6K;AAJP,MAAZ;AAMA,SAAI,KAAK7K,IAAL,CAAUqK,IAAd,EAAoB;AAAEpE,aAAMoE,IAAN,GAAa,KAAKrK,IAAL,CAAUqK,IAAvB;AAA8B;;AAEpD,SAAI,KAAKrK,IAAL,CAAUT,IAAV,KAAmB,MAAvB,EAA+B;AAC7B0G,aAAMkE,KAAN,GAAc,KAAKnK,IAAL,CAAUsN,WAAxB;AACD;;AAED;AACArH,WAAMc,KAAN,GAAc,KAAK/G,IAAL,CAAU+G,KAAV,CAAgBsC,WAAhB,EAAd;AACA,UAAKoE,KAAL,CAAWtO,YAAX,CAAwB,MAAxB,EAAgC8G,KAAhC;AACA,UAAKwH,KAAL,CAAWtO,YAAX,CAAwB,UAAxB,EAAoC,KAAKa,IAAL,CAAU6K,KAAV,GAAgB,CAAhB,GAAkB,IAAlB,GAAuB,SAA3D;;AAEA;AACA,cAAS8B,YAAT,CAAsBhO,EAAtB,EAA0BqP,QAA1B,EAAoCnB,YAApC,EAAkD;AAChD,WAAI,CAAClO,GAAGC,QAAJ,IAAgB,CAACD,GAAGC,QAAH,CAAY4F,QAA7B,IAAyC,CAAC7F,GAAGC,QAAH,CAAY4F,QAAZ,CAAqB,CAArB,CAA9C,EAAuE;AACrE,gBAAOuE,WAAW,YAAW;AAC3B4D,wBAAahO,EAAb,EAAiBqP,QAAjB;AACD,UAFM,EAEJ,EAFI,CAAP;AAGA;AACF,WAAIlB,IAAInO,GAAGC,QAAH,CAAY4F,QAAZ,CAAqB,CAArB,EAAwBuI,QAAxB,CAAiCC,aAAzC;AACA,WAAI,CAACF,CAAL,EAAQ;AACN,gBAAO/D,WAAW,YAAW;AAC3B4D,wBAAahO,EAAb,EAAiBqP,QAAjB;AACD,UAFM,EAEJ,EAFI,CAAP;AAGD;AACDlB,WAAIA,EAAEA,EAAElJ,MAAF,GAAS,CAAX,CAAJ;AACA,WAAI,CAACkJ,CAAL,EAAQ;AAAE,gBAAOkB,SAAS,CAAT,CAAP;AAAqB;AAC/B,WAAIlB,EAAEG,IAAN,EAAY;AACVhH,eAAMc,KAAN,GAAcd,MAAMc,KAAN,CAAY1B,KAAZ,CAAkB,CAAlB,EAAqB,CAAC,CAAtB,CAAd;AACA1G,YAAGQ,YAAH,CAAgB,MAAhB,EAAwB8G,KAAxB;AACA,gBAAO0G,aAAahO,EAAb,EAAiBqP,QAAjB,CAAP;AACD,QAJD,MAIO;AACL,aAAI,CAACnB,YAAL,EAAmB;AAAEA,0BAAepM,MAAM0F,cAAN,CAAqBxH,EAArB,EAAyBsH,MAAMG,SAA/B,CAAf;AAA2D;AAChF0G,aAAI,CAACA,EAAEnE,QAAF,CAAW,CAAX,IAAgBmE,EAAE9M,IAAF,CAAO6K,KAAxB,KAAmCgC,eAAa5L,KAAKjB,IAAL,CAAU6K,KAA1D,CAAJ;AACA,aAAIsC,YAAYL,IAAI7L,KAAKjB,IAAL,CAAU6K,KAA9B;AACA,aAAIsC,YAAY,CAAhB,EAAmB;AACjBlH,iBAAMc,KAAN,GAAcd,MAAMc,KAAN,CAAY1B,KAAZ,CAAkB,CAAlB,EAAqB,CAAC,CAAtB,CAAd;AACA1G,cAAGQ,YAAH,CAAgB,MAAhB,EAAwB8G,KAAxB;AACA,kBAAO0G,aAAahO,EAAb,EAAiBqP,QAAjB,EAA2BnB,YAA3B,CAAP;AACD;AACF;AACD,cAAOmB,SAASlB,CAAT,CAAP;AACD;AACD/D,gBAAW,YAAW;AACpB,WAAI9H,KAAKjB,IAAL,CAAU+G,KAAV,CAAgBnD,MAApB,EAA4B;AAC1B+I,sBAAa1L,KAAKwM,KAAlB,EAAyB,UAAC5C,KAAD,EAAS;AAChC5J,gBAAKwM,KAAL,CAAWtO,YAAX,CAAwB,UAAxB,EAAuC0L,QAAM,CAAN,GAAQ,OAAK,CAApD,SAAyD,OAAK,CAA9D,YADgC,CACwC;AACxEA,mBAAQA,QAAM,IAAd;AACA5J,gBAAKuM,OAAL,CAAarO,YAAb,CAA0B,OAA1B,EAAmC0L,KAAnC;AACA5J,gBAAK8M,OAAL,GAAelD,KAAf;AACA5J,gBAAKsM,MAAL,CAAYpO,YAAZ,CAAyB,OAAzB,EAAkC0L,QAAM,IAAxC;AACA5J,gBAAKsM,MAAL,CAAYpO,YAAZ,CAAyB,UAAzB,EAAqC0L,QAAM,CAAN,GAAQ,MAA7C;AACArM,iBAAM0B,IAAN,CAAWe,KAAKtC,EAAhB,EAAoB,cAApB,EAAoCkM,KAApC;AACD,UARD;AASD;;AAED,WAAI5J,KAAKjB,IAAL,CAAUkK,QAAd,EAAwB;AACtBjJ,cAAKsM,MAAL,CAAYpO,YAAZ,CAAyB,SAAzB,EAAoC,KAApC;AACA,aAAI8O,QAAQlC,YAAY,YAAW;AACjC,eAAI9K,KAAKwM,KAAL,CAAW7O,QAAX,CAAoB4F,QAApB,CAA6B,CAA7B,KAAmCvD,KAAKwM,KAAL,CAAW7O,QAAX,CAAoB4F,QAApB,CAA6B,CAA7B,EAAgCuI,QAAhC,CAAyCC,aAAhF,EAA+F;AAC7FnB,2BAAcoC,KAAd;AACAxN,mBAAMsF,aAAN,CAAoB9E,KAAKtC,EAAzB,EAA6B,GAA7B;AACD;AACF,UALW,EAKT,EALS,CAAZ;AAMD,QARD,MAQO;AACL,aAAIsP,SAAQlC,YAAY,YAAW;AACjC,eAAI9K,KAAKwM,KAAL,CAAW7O,QAAX,CAAoB4F,QAApB,CAA6B,CAA7B,KAAmCvD,KAAKwM,KAAL,CAAW7O,QAAX,CAAoB4F,QAApB,CAA6B,CAA7B,EAAgCuI,QAAhC,CAAyCC,aAAhF,EAA+F;AAC7FnB,2BAAcoC,MAAd;AACAxN,mBAAMsF,aAAN,CAAoB9E,KAAKtC,EAAzB,EAA6B,CAA7B;AACD;AACF,UALW,EAKT,EALS,CAAZ;AAMD;;AAED,WAAIsC,KAAKjB,IAAL,CAAUT,IAAV,KAAmB,MAAvB,EAA+B;AAC7B0B,cAAKsM,MAAL,CAAYpO,YAAZ,CAAyB,SAAzB,EAAoC,KAApC;AACA,aAAI8O,UAAQlC,YAAY,YAAW;AACjC,eAAI9K,KAAKwM,KAAL,CAAW7O,QAAX,CAAoB4F,QAApB,CAA6B,CAA7B,KAAmCvD,KAAKwM,KAAL,CAAW7O,QAAX,CAAoB4F,QAApB,CAA6B,CAA7B,EAAgCuI,QAAhC,CAAyCC,aAAhF,EAA+F;AAC7FnB,2BAAcoC,OAAd;AACAxN,mBAAMsF,aAAN,CAAoB9E,KAAKuM,OAAzB,EAAkC,CAAlC;AACA,iBAAIvM,KAAKjB,IAAL,CAAUkK,QAAd,EAAwB;AACtBzJ,qBAAMsF,aAAN,CAAoB9E,KAAKwM,KAAzB,EAAgC,GAAhC;AACD;AACF;AACF,UARW,EAQT,EARS,CAAZ;AASD;AACF,MA1CD,EA0CG,CA1CH;AA2CD,IAzKgC;AA0KjC7N,SAAM,gBAAY,CAAE,CA1Ka;AA2KjCoD,WAAQ,kBAAY,CAAE,CA3KW;AA4KjCE,UAAO,iBAAY,CAAE,CA5KY;AA6KjCC,SAAM,gBAAY,CAAE;AA7Ka,EAAnC;;AAgLAhF,QAAO0F,iBAAP,CAAyB,UAAzB,EAAqC;AACnCC,sBAAmB;AACjB4J,aAAQ;AADS,IADgB;AAInC1J,aAAU;AACRkG,eAAU,iBADF;AAER3K,WAAM,aAFE;AAGRc,WAAM,aAHE;AAIR0G,YAAO,cAJC;AAKR,qBAAgB,oBALR;AAMRoD,YAAO,cANC;AAORE,WAAM,aAPE;AAQR,uBAAkB,sBARV;AASR,oBAAe,mBATP;AAUR,gBAAW,gBAVH;AAWR,cAAS;AAXD;AAJyB,EAArC,E;;;;;;;;ACrLAlK,QAAOC,OAAP,GAAiB,CACf,EAAEb,MAAM,KAAR,EAAemF,IAAI,oBAAnB,EAAyCE,KAAQzG,OAAOG,WAAf,6BAAzC,EADe,EAEf,EAAEiB,MAAM,OAAR,EAAiBmF,IAAI,mBAArB,EAA0CE,KAAQzG,OAAOG,WAAf,4BAA1C,EAFe,EAGf,EAAEiB,MAAM,OAAR,EAAiBmF,IAAI,2BAArB,EAAkDE,KAAQzG,OAAOG,WAAf,oCAAlD,EAHe,CAAjB,C;;;;;;;;ACAA,KAAMuC,MAAM;;AAEVpB,SAAM,cAAS+I,MAAT,EAAiB;AACrB,SAAI7J,KAAK+D,SAAS4B,aAAT,CAAuB,SAAvB,CAAT;AACA3F,QAAGQ,YAAH,CAAgB,KAAhB,EAAuB,wBAAvB;AACAR,QAAGQ,YAAH,CAAgB,KAAhB,EAAuB,IAAvB;AACAR,QAAGQ,YAAH,CAAgB,KAAhB,EAAuB,oBAAvB;AACAR,QAAGQ,YAAH,CAAgB,UAAhB,EAA4B,OAA5B;AACAqJ,YAAOhH,WAAP,CAAmB7C,EAAnB;;AAEAA,UAAK+D,SAAS4B,aAAT,CAAuB,SAAvB,CAAL;AACA3F,QAAGQ,YAAH,CAAgB,KAAhB,EAAuB,gCAAvB;AACAR,QAAGQ,YAAH,CAAgB,KAAhB,EAAuB,IAAvB;AACAR,QAAGQ,YAAH,CAAgB,KAAhB,EAAuB,4BAAvB;AACAR,QAAGQ,YAAH,CAAgB,UAAhB,EAA4B,OAA5B;AACAqJ,YAAOhH,WAAP,CAAmB7C,EAAnB;AACD,IAhBS;;AAkBVkP,UAAO,eAASrF,MAAT,EAAiB;AACtB,SAAI7J,KAAK6J,OAAOrE,aAAP,CAAqB,8BAArB,CAAT;AACA,SAAI,CAACxF,EAAL,EAAS;AAAE;AAAS;AACpBA,QAAG2H,UAAH,CAAcyD,KAAd,CAAoBC,SAApB;AACArL,QAAG2H,UAAH,CAAcyD,KAAd,CAAoBE,SAApB;AACD,IAvBS;;AAyBV2D,kBAAe,uBAASpF,MAAT,EAAiB;AAC9B,SAAI7J,KAAK6J,OAAOrE,aAAP,CAAqB,sCAArB,CAAT;AACA,SAAI,CAACxF,EAAL,EAAS;AAAE;AAAS;AACpBA,QAAG2H,UAAH,CAAcyD,KAAd,CAAoBC,SAApB;AACArL,QAAG2H,UAAH,CAAcyD,KAAd,CAAoBE,SAApB;AACD;AA9BS,EAAZ;;AAiCA9J,QAAOC,OAAP,GAAiBS,GAAjB,C","file":"aframe-material.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap bd5bfcd3be4a3461d5f4","(()=>{\n  if (!AFRAME) { return console.error('AFRAME is required!'); }\n  if (!AFRAME.ASSETS_PATH) { AFRAME.ASSETS_PATH = \"./assets\"; }\n  require('aframe-rounded');\n  require(\"./fade\");\n  //require(\"./alert\"); @TODO ;)\n  require(\"./keyboard\");\n  require(\"./input\");\n  //require(\"./switch\");\n  //require(\"./form\");\n  //require(\"./radio\");\n // require(\"./checkbox\");\n  require(\"./button\");\n // require(\"./toast\");\n})();\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","!function(t){function e(i){if(a[i])return a[i].exports;var d=a[i]={exports:{},id:i,loaded:!1};return t[i].call(d.exports,d,d.exports,e),d.loaded=!0,d.exports}var a={};return e.m=t,e.c=a,e.p=\"\",e(0)}([function(t,e){AFRAME.registerComponent(\"rounded\",{schema:{enabled:{default:!0},width:{type:\"number\",default:1},height:{type:\"number\",default:1},radius:{type:\"number\",default:.3},topLeftRadius:{type:\"number\",default:-1},topRightRadius:{type:\"number\",default:-1},bottomLeftRadius:{type:\"number\",default:-1},bottomRightRadius:{type:\"number\",default:-1},color:{type:\"color\",default:\"#F0F0F0\"},opacity:{type:\"number\",default:1}},init:function(){this.rounded=new THREE.Mesh(this.draw(),new THREE.MeshPhongMaterial({color:new THREE.Color(this.data.color),side:THREE.DoubleSide})),this.updateOpacity(),this.el.setObject3D(\"mesh\",this.rounded)},update:function(){this.data.enabled?this.rounded&&(this.rounded.visible=!0,this.rounded.geometry=this.draw(),this.rounded.material.color=new THREE.Color(this.data.color),this.updateOpacity()):this.rounded.visible=!1},updateOpacity:function(){this.data.opacity<0&&(this.data.opacity=0),this.data.opacity>1&&(this.data.opacity=1),this.data.opacity<1?this.rounded.material.transparent=!0:this.rounded.material.transparent=!1,this.rounded.material.opacity=this.data.opacity},tick:function(){},remove:function(){this.rounded&&(this.el.object3D.remove(this.rounded),this.rounded=null)},draw:function(){function t(t,e,a,i,d,o,u,r,s){o||(o=1e-5),u||(u=1e-5),r||(r=1e-5),s||(s=1e-5),t.moveTo(e,a+o),t.lineTo(e,a+d-o),t.quadraticCurveTo(e,a+d,e+o,a+d),t.lineTo(e+i-u,a+d),t.quadraticCurveTo(e+i,a+d,e+i,a+d-u),t.lineTo(e+i,a+s),t.quadraticCurveTo(e+i,a,e+i-s,a),t.lineTo(e+r,a),t.quadraticCurveTo(e,a,e,a+r)}var e=new THREE.Shape,a=[this.data.radius,this.data.radius,this.data.radius,this.data.radius];return this.data.topLeftRadius!=-1&&(a[0]=this.data.topLeftRadius),this.data.topRightRadius!=-1&&(a[1]=this.data.topRightRadius),this.data.bottomLeftRadius!=-1&&(a[2]=this.data.bottomLeftRadius),this.data.bottomRightRadius!=-1&&(a[3]=this.data.bottomRightRadius),t(e,0,0,this.data.width,this.data.height,a[0],a[1],a[2],a[3]),new THREE.ShapeBufferGeometry(e)},pause:function(){},play:function(){}}),AFRAME.registerPrimitive(\"a-rounded\",{defaultComponents:{rounded:{}},mappings:{enabled:\"rounded.enabled\",width:\"rounded.width\",height:\"rounded.height\",radius:\"rounded.radius\",\"top-left-radius\":\"rounded.topLeftRadius\",\"top-right-radius\":\"rounded.topRightRadius\",\"bottom-left-radius\":\"rounded.bottomLeftRadius\",\"bottom-right-radius\":\"rounded.bottomRightRadius\",color:\"rounded.color\",opacity:\"rounded.opacity\"}})}]);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/aframe-rounded/dist/aframe-rounded-component.min.js\n// module id = 2\n// module chunks = 0","const Event = require('../core/event');\n\nvar opacityUpdate = function(opacity) {\n  this.el.object3D.traverse(function (o) {\n    if (o.material) {\n      o.material.transparent = true;\n      o.material.opacity = opacity;\n    }\n  });\n  for (let text of this.textEntities) {\n    text.setAttribute('opacity', opacity);\n  }\n}\n\n// -----------------------------------------------------------------------------\n// FADEIN\n\nAFRAME.registerComponent('fadein', {\n  schema: {\n    duration: { type: 'int', default: 200 },\n  },\n  init: function() {\n    this.textEntities = this.el.querySelectorAll('a-text');\n    this.opacityUpdate(0);\n    this.start = null;\n  },\n  tick: function (t) {\n    if (!this.start) { this.start = t; }\n    var opacity = Math.min((t - this.start) / this.data.duration, 1);\n    this.opacityUpdate(opacity);\n    if (opacity === 1) {\n      this.el.removeAttribute('fadein');\n      Event.emit(this.el, 'animationend');\n    }\n  },\n  opacityUpdate: opacityUpdate\n});\n\n// -----------------------------------------------------------------------------\n// FADEOUT\n\nAFRAME.registerComponent('fadeout', {\n  schema: {\n    duration: { type: 'int', default: 200 }\n  },\n  init: function() {\n    this.textEntities = this.el.querySelectorAll('a-text');\n    this.opacityUpdate(1);\n    this.start = null;\n  },\n  tick: function (t) {\n    if (!this.start) { this.start = t; }\n    var opacity = 1-Math.min((t - this.start) / this.data.duration, 1);\n    this.opacityUpdate(opacity);\n    if (opacity === 0) {\n      this.el.removeAttribute('fadeout');\n      Event.emit(this.el, 'animationend');\n    }\n  },\n  opacityUpdate: opacityUpdate\n});\n\n// -----------------------------------------------------------------------------\n// SHOW\n\nAFRAME.registerComponent('show', {\n  init: function() {\n    this.textEntities = this.el.querySelectorAll('a-text');\n    this.opacityUpdate(1);\n    this.el.removeAttribute('show');\n  },\n  opacityUpdate: opacityUpdate\n});\n\n// -----------------------------------------------------------------------------\n// HIDE\n\nAFRAME.registerComponent('hide', {\n  init: function() {\n    this.textEntities = this.el.querySelectorAll('a-text');\n    this.opacityUpdate(0);\n    this.el.removeAttribute('hide');\n  },\n  opacityUpdate: opacityUpdate\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/fade/index.js","module.exports = {\n  emit: (el, name, data)=> {\n    el.dispatchEvent( new CustomEvent(name, {detail: data}) );\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/event.js","const Utils = require('../utils');\nconst Assets = require('./assets');\nconst Draw = require('./draw');\nconst Behaviors = require('./behaviors');\nconst SFX = require('./sfx');\nconst Event = require('../core/event');\n\nAFRAME.registerComponent('keyboard', {\n\tschema: {\n\t\tisOpen: {type: \"boolean\", default: false},\n\t\tphysicalKeyboard: {type: \"boolean\", default: false}\n\t},\n\tcurrentInput: null,\n\tinit: function () {\n\t\tlet that = this;\n\n\t\t// Assets\n\t\tUtils.preloadAssets(Assets);\n\n\t\t// SFX\n\t\tSFX.init(this.el);\n\n\t\t// Draw\n\t\tDraw.init(this.el);\n\n\t\t// Init keyboard UI\n\t\tlet numericalUI = Draw.numericalUI(),\n\t\t\tmainUI = Draw.mainUI(),\n\t\t\tactionsUI = Draw.actionsUI();\n\n\t\t// Create layout\n\t\tthis.el.alphabeticalLayout = Draw.alphabeticalLayout();\n\t\tthis.el.symbolsLayout = Draw.symbolsLayout();\n\n\t\t// Append layouts to UI\n\t\tnumericalUI.appendChild(Draw.numericalLayout());\n\t\tmainUI.appendChild(this.el.alphabeticalLayout);\n\t\tactionsUI.appendChild(Draw.actionsLayout());\n\n\t\tthis.el.appendChild(numericalUI);\n\t\tthis.el.appendChild(mainUI);\n\t\tthis.el.appendChild(actionsUI);\n\n\t\t// Inject methods in elements..\n\t\tthis.el.show = function () {\n\t\t\tBehaviors.showKeyboard(that.el);\n\t\t}\n\t\tthis.el.hide = function () {\n\t\t\tBehaviors.hideKeyboard(that.el);\n\t\t}\n\t\tthis.el.open = function () {\n\t\t\tBehaviors.openKeyboard(that.el);\n\t\t}\n\t\tthis.el.dismiss = function () {\n\t\t\tBehaviors.dismissKeyboard(that.el);\n\t\t}\n\t\tthis.el.destroy = function () {\n\t\t\tBehaviors.destroyKeyboard(that.el);\n\t\t}\n\n\t\t// Set default value\n\t\tthis.el.setAttribute(\"scale\", \"2 2 2\");\n\t\tthis.el.setAttribute(\"rotation\", \"-20 0 0\");\n\t\tthis.el.setAttribute(\"position\", \"-1.5 -0.3 -2\");\n\n\t\t// Register keyboard events\n\t\tthis.el.addEventListener('input', this.inputEvent.bind(this));\n\t\tthis.el.addEventListener('backspace', this.backspaceEvent.bind(this));\n\t\tthis.el.addEventListener('dismiss', this.dismissEvent.bind(this));\n\n\t\t// Register global events\n\t\tdocument.addEventListener('keydown', this.keydownEvent.bind(this));\n\t\tdocument.body.addEventListener('didfocusinput', this.didFocusInputEvent.bind(this));\n\t\tdocument.body.addEventListener('didblurinput', this.didBlurInputEvent.bind(this));\n\t},\n\tupdate: function () {\n\t\tif (this.data.isOpen) {\n\t\t\tBehaviors.showKeyboard(this.el);\n\t\t} else {\n\t\t\tBehaviors.hideKeyboard(this.el);\n\t\t}\n\t},\n\ttick: function () {\n\t},\n\tremove: function () {\n\t\tthis.el.removeEventListener('input', this.inputEvent.bind(this));\n\t\tthis.el.removeEventListener('backspace', this.backspaceEvent.bind(this));\n\t\tthis.el.removeEventListener('dismiss', this.dismissEvent.bind(this));\n\n\t\tdocument.removeEventListener('keydown', this.keydownEvent.bind(this));\n\t\tdocument.body.removeEventListener('didfocusinput', this.didFocusInputEvent.bind(this));\n\t\tdocument.body.removeEventListener('didblurinput', this.didBlurInputEvent.bind(this));\n\t},\n\tpause: function () {\n\t},\n\tplay: function () {\n\t},\n\n\t// Fired on keyboard key press\n\tinputEvent: function (e) {\n\t\t//console.log('input event: ', e);\n\t\tif (this.currentInput) {\n\t\t\tthis.currentInput.appendString(e.detail);\n\t\t}\n\t},\n\n\t// Fired on backspace key press\n\tbackspaceEvent: function (e) {\n\t\tif (this.currentInput) {\n\t\t\tthis.currentInput.deleteLast();\n\t\t}\n\t},\n\n\tdismissEvent: function (e) {\n\t\tif (this.currentInput) {\n\t\t\tthis.currentInput.blur();\n\t\t}\n\t},\n\n\t// physical keyboard event\n\tkeydownEvent: function (e) {\n\t\tif (this.currentInput && this.data.physicalKeyboard) {\n\t\t\te.preventDefault();\n\t\t\te.stopImmediatePropagation();\n\t\t\te.stopPropagation();\n\t\t\t// console.log('physical keyboard event: ', e);\n\t\t\tif (e.key === 'Enter') {\n\t\t\t\tEvent.emit(Behaviors.el, 'input', '\\n');\n\t\t\t\tEvent.emit(Behaviors.el, 'enter', '\\n');\n\t\t\t}\n\t\t\telse if (e.key === 'Backspace') {\n\t\t\t\tEvent.emit(Behaviors.el, 'backspace');\n\t\t\t}\n\t\t\telse if (e.key === 'Escape') {\n\t\t\t\tEvent.emit(Behaviors.el, 'dismiss');\n\t\t\t}\n\t\t\telse if (e.key.length < 2) {\n\t\t\t\tEvent.emit(Behaviors.el, 'input', e.key);\n\t\t\t}\n\t\t}\n\t},\n\n\t// Fired when an input has been selected\n\tdidFocusInputEvent: function (e) {\n\t\tif (this.currentInput) {\n\t\t\tthis.currentInput.blur(true);\n\t\t}\n\t\tthis.currentInput = e.detail;\n\t\tif (!this.el.isOpen) {\n\t\t\tBehaviors.openKeyboard(this.el);\n\t\t}\n\t},\n\n\t// Fired when an input has been deselected\n\tdidBlurInputEvent: function (e) {\n\t\tthis.currentInput = null;\n\t\tBehaviors.dismissKeyboard(this.el);\n\t}\n});\n\nAFRAME.registerPrimitive('a-keyboard', {\n\tdefaultComponents: {\n\t\tkeyboard: {}\n\t},\n\tmappings: {\n\t\t'is-open': 'keyboard.isOpen',\n\t\t'physical-keyboard': 'keyboard.physicalKeyboard',\n\t}\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/keyboard/index.js","const Utils = {};\n\n/**\n  Utils.preloadAssets([])\n  Add assets to Assets managment system.\n*/\nUtils.preloadAssets = (assets_arr)=>{\n  let assets = document.querySelector('a-assets'), already_exists;\n\n  if (!assets) {\n    var scene = document.querySelector('a-scene');\n    assets = document.createElement('a-assets');\n    scene.appendChild(assets);\n  }\n\n  for (let item of assets_arr) {\n    already_exists = false;\n\n    for (let stuff of assets.children) {\n      if (item.id === stuff.id) {\n        already_exists = true;\n      }\n    }\n\n    if (!already_exists) {\n      var asset_item = document.createElement(item.type);\n      asset_item.setAttribute('id', item.id);\n      asset_item.setAttribute('src', item.src);\n      assets.appendChild(asset_item);\n    }\n  }\n}\n\n\n/**\n  Utils.extend(a, b)\n  Assign object to other object.\n*/\nUtils.extend = function(a, b) {\n\tfor (let key in b) {\n\t\tif (b.hasOwnProperty(key)) {\n\t\t\ta[key] = b[key];\n\t\t}\n\t}\n\treturn a;\n};\n\n\nUtils.clone = function(original) {\n\tif (Array.isArray(original)) {\n\t\treturn original.slice(0);\n\t}\n\n\t// First create an empty object with\n\t// same prototype of our original source\n\tconst clone = Object.create(Object.getPrototypeOf(original));\n\tlet i = undefined;\n\tconst keys = Object.getOwnPropertyNames(original);\n\ti = 0;\n\twhile (i < keys.length) {\n\t\t// copy each property into the clone\n\t\tObject.defineProperty(clone, keys[i], Object.getOwnPropertyDescriptor(original, keys[i]));\n\t\ti++;\n\t}\n\treturn clone;\n};\n\n\nUtils.updateOpacity = function(el, opacity) {\n  if (el.hasAttribute('text')) {\n    let props = el.getAttribute('text');\n    if (props) {\n      props.opacity = opacity;\n      el.setAttribute('text', props);\n    }\n  }\n  el.object3D.traverse(function (o) {\n    if (o.material) {\n      o.material.transparent = true;\n      o.material.opacity = opacity;\n    }\n  });\n  for (let text of el.querySelectorAll('a-text')) {\n    text.setAttribute('opacity', opacity);\n  }\n}\n\n\n// Calculate the width factor\nUtils.getWidthFactor = function(el, wrapCount) {\n  let widthFactor = 0.00001;\n  if (el.components.text && el.components.text.currentFont) {\n    widthFactor = el.components.text.currentFont.widthFactor\n    widthFactor = ((0.5 + wrapCount) * widthFactor);\n  }\n  return widthFactor;\n}\n\nmodule.exports = Utils;\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils.js","module.exports = [\n  { type: 'img', id: 'aframeKeyboardShift', src: `${AFRAME.ASSETS_PATH}/images/ShiftIcon.png`},\n  { type: 'img', id: 'aframeKeyboardShiftActive', src: `${AFRAME.ASSETS_PATH}/images/ShiftActiveIcon.png`},\n  { type: 'img', id: 'aframeKeyboardGlobal', src: `${AFRAME.ASSETS_PATH}/images/GlobalIcon.png`},\n  { type: 'img', id: 'aframeKeyboardBackspace', src: `${AFRAME.ASSETS_PATH}/images/BackspaceIcon.png`},\n  { type: 'img', id: 'aframeKeyboardEnter', src: `${AFRAME.ASSETS_PATH}/images/EnterIcon.png`},\n  { type: 'img', id: 'aframeKeyboardDismiss', src: `${AFRAME.ASSETS_PATH}/images/DismissIcon.png`},\n  { type: 'img', id: 'aframeKeyboardShadow', src: `${AFRAME.ASSETS_PATH}/images/KeyShadow.png`},\n  { type: 'audio', id: 'aframeKeyboardKeyIn', src: `${AFRAME.ASSETS_PATH}/sounds/KeyIn.mp3`},\n  { type: 'audio', id: 'aframeKeyboardKeyDown', src: `${AFRAME.ASSETS_PATH}/sounds/KeyDown.mp3`}\n]\n\n\n\n// WEBPACK FOOTER //\n// ./src/keyboard/assets.js","const Layouts = require('./layouts');\nconst Config = require('./config');\nconst Behaviors = require('./behaviors');\nconst Draw = {};\n\nDraw.el = null;\n\nDraw.init = (el)=>{\n  Draw.el = el;\n  Behaviors.el = el;\n  Behaviors.SFX = el.SFX;\n}\n\n// -----------------------------------------------------------------------------\n// DRAW NUMERICAL UI\n\nDraw.numericalUI = ()=> {\n  var wrapper = document.createElement('a-entity');\n  wrapper.setAttribute('position', '0.025 0 0.12');\n  wrapper.setAttribute('rotation', '0 25 0');\n  wrapper.setAttribute('data-ui', true);\n\n  var el = document.createElement('a-rounded');\n  el.setAttribute('width', '0.280');\n  el.setAttribute('height', '0.360');\n  el.setAttribute('radius', '0.02');\n  el.setAttribute('color', Config.KEYBOARD_COLOR);\n  wrapper.appendChild(el);\n\n  return wrapper;\n}\n\n// -----------------------------------------------------------------------------\n// DRAW MAIN UI\n\nDraw.mainUI = ()=>{\n  var wrapper = document.createElement('a-entity');\n  wrapper.setAttribute('position', '0.312 0 0');\n  wrapper.setAttribute('data-ui', true);\n\n  var el = document.createElement('a-rounded');\n  el.setAttribute('width', '0.840');\n  el.setAttribute('height', '0.360');\n  el.setAttribute('radius', '0.02');\n  el.setAttribute('color', Config.KEYBOARD_COLOR);\n  wrapper.appendChild(el);\n\n  return wrapper;\n}\n\n// -----------------------------------------------------------------------------\n// DRAW ACTION UI\n\nDraw.actionsUI = ()=> {\n  var wrapper = document.createElement('a-entity');\n  wrapper.setAttribute('position', '1.180 0 0.01');\n  wrapper.setAttribute('rotation', '0 -25 0');\n  wrapper.setAttribute('data-ui', true);\n\n  var el = document.createElement('a-rounded');\n  el.setAttribute('width', '0.180');\n  el.setAttribute('height', '0.360');\n  el.setAttribute('radius', '0.02');\n  el.setAttribute('color', Config.KEYBOARD_COLOR);\n  wrapper.appendChild(el);\n\n  return wrapper;\n}\n\n// -----------------------------------------------------------------------------\n// DRAW NUMERICAL LAYOUT\n\nDraw.numericalLayout = ()=> {\n  var data = Layouts.numerical;\n  var wrapper = document.createElement('a-entity');\n  wrapper.setAttribute('position', '0.02 0.26 0.001');\n\n  let index_y = 0;\n  for (var i in data) {\n    let key_id = 'num-'+i;\n    let key = Draw.key(key_id, data[i].type, data[i].value);\n    let index_x = i%3;\n    let x = Config.KEY_WIDTH*index_x;\n    let y = Config.KEY_WIDTH*index_y;\n    key.setAttribute('position', `${x} -${y} 0`);\n    if (index_x === 2) { index_y++; }\n    wrapper.appendChild(key);\n  }\n\n  return wrapper;\n}\n\n// -----------------------------------------------------------------------------\n// DRAW ALPHABETICAL LAYOUT\n\nDraw.alphabeticalLayout = ()=> {\n  var data = Layouts.alphabetical;\n  var wrapper = document.createElement('a-entity');\n  wrapper.setAttribute('position', '0.02 0.26 0.001');\n\n  let index_y = 0, index_x = 0, prev_was_space = false;\n\n  for (var i in data) {\n    let key_id = 'main-'+i;\n    let key = Draw.key(key_id, data[i].type, data[i].value);\n\n    let x = Config.KEY_WIDTH*index_x;\n    let y = Config.KEY_WIDTH*index_y;\n\n    // Add left padding on the second line\n    if (index_y === 1) {\n      x = x + Config.KEY_WIDTH/2;\n    }\n\n    // Add margin on the key next to the spacebar key\n    if (prev_was_space) {\n      x = x + Config.SPACE_KEY_WIDTH - Config.KEY_WIDTH + (0.055*2);\n    }\n\n    // Add margin to the spacebar key\n    if (data[i].type === 'spacebar') {\n      prev_was_space = true;\n      x = x+0.055;\n      y = Config.KEY_WIDTH*index_y -  0.01;\n    }\n\n    key.setAttribute('position', `${x} -${y} 0`);\n\n    if (index_y === 1 && index_x === 8) {\n      index_x = -1;\n      index_y++;\n    } else if (index_x === 9) {\n      index_x = -1;\n      index_y++;\n    }\n    index_x++;\n\n    wrapper.appendChild(key);\n  }\n\n  return wrapper;\n}\n\n// -----------------------------------------------------------------------------\n// DRAW SYMBOLS LAYOUT\n\nDraw.symbolsLayout = ()=> {\n  var data = Layouts.symbols;\n  var wrapper = document.createElement('a-entity');\n  wrapper.setAttribute('position', '0.02 0.26 0.001');\n\n  let index_y = 0, index_x = 0, prev_was_space = false;\n\n  for (var i in data) {\n\n    let key_id = 'symbols-'+i;\n    let key = Draw.key(key_id, data[i].type, data[i].value);\n    let x = Config.KEY_WIDTH*index_x;\n    let y = Config.KEY_WIDTH*index_y;\n\n    // Add margin on the key next to the spacebar key\n    if (prev_was_space) {\n      x = x + Config.SPACE_KEY_WIDTH - Config.KEY_WIDTH + (0.055*2);\n    }\n\n    // Add margin to the spacebar key\n    if (data[i].type === 'spacebar') {\n      prev_was_space = true;\n      x = x+0.055;\n      y = Config.KEY_WIDTH*index_y -  0.01;\n    }\n\n    key.setAttribute('position', `${x} -${y} 0`);\n\n    if (index_x === 9) {\n      index_x = -1;\n      index_y++;\n    }\n    index_x++;\n    wrapper.appendChild(key);\n  }\n\n  return wrapper;\n}\n\n// -----------------------------------------------------------------------------\n// DRAW ACTIONS LAYOUT\n\nDraw.actionsLayout = ()=> {\n  var data = Layouts.actions;\n  var wrapper = document.createElement('a-entity');\n  wrapper.setAttribute('position', '0.02 0.26 0.001');\n\n  let val_y = 0;\n  for (var i in data) {\n    let key_id = 'action-'+i;\n    let key = Draw.key(key_id, data[i].type, data[i].value);\n\n    key.setAttribute('position', `0 -${val_y} 0`);\n    if (i == 0) {\n      val_y += Config.ACTION_WIDTH+0.01;\n    }\n    else if (i == 1) {\n      val_y += Config.KEY_WIDTH+0.01;\n    }\n    wrapper.appendChild(key);\n  }\n\n  return wrapper;\n}\n\n// -----------------------------------------------------------------------------\n// DRAW KEY\n\nDraw.key = (id, type, value)=> {\n  var that = this;\n\n  var el = document.createElement('a-rounded');\n  el.setAttribute('key-id', id);\n  el.setAttribute('width', Config.KEY_WIDTH);\n  el.setAttribute('height', Config.KEY_WIDTH);\n  el.setAttribute('radius', '0.008');\n  el.setAttribute('position', '0 0 0');\n  el.setAttribute('key-type', type);\n  el.setAttribute('key-value', value);\n  el.setAttribute('color', Config.KEYBOARD_COLOR);\n\n  // ---------------------------------------------------------------------------\n  // EVENTS\n\n  Behaviors.addKeyEvents(el);\n\n  // ---------------------------------------------------------------------------\n  // SHADOW\n\n  el.shadow_el = document.createElement('a-image');\n  el.shadow_el.setAttribute('width', Config.KEY_WIDTH*1.25);\n  el.shadow_el.setAttribute('height', Config.KEY_WIDTH*1.25);\n  el.shadow_el.setAttribute('position', Config.KEY_WIDTH/2+' '+Config.KEY_WIDTH/2+' -0.002');\n  el.shadow_el.setAttribute('src', '#aframeKeyboardShadow');\n  el.appendChild(el.shadow_el);\n\n  // ---------------------------------------------------------------------------\n  // TEXT KEY\n\n  if (type === 'text' || type === 'spacebar' || type ===  'symbol') {\n    var letter_el = document.createElement('a-text');\n    letter_el.setAttribute('value', value);\n    letter_el.setAttribute('color', '#dbddde');\n    letter_el.setAttribute('position', Config.KEY_WIDTH/2+' '+Config.KEY_WIDTH/2+' 0.01');\n    letter_el.setAttribute('scale', '0.16 0.16 0.16');\n    letter_el.setAttribute('align', 'center');\n    letter_el.setAttribute('baseline', 'center');\n    el.appendChild(letter_el);\n  }\n\n  // ---------------------------------------------------------------------------\n  // SPACEBAR KEY\n\n  if (type === 'spacebar') {\n    el.setAttribute('width', Config.SPACE_KEY_WIDTH);\n    el.setAttribute('height', Config.SPACE_KEY_HEIGHT);\n    el.setAttribute('color', '#404b50');\n    el.shadow_el.setAttribute('width', Config.SPACE_KEY_WIDTH*1.12);\n    el.shadow_el.setAttribute('height', Config.SPACE_KEY_HEIGHT*1.2);\n    el.shadow_el.setAttribute('position', Config.SPACE_KEY_WIDTH/2+' '+Config.SPACE_KEY_HEIGHT/2+' -0.02');\n    letter_el.setAttribute('color', '#adb1b3');\n    letter_el.setAttribute('scale', '0.12 0.12 0.12');\n    letter_el.setAttribute('position', Config.SPACE_KEY_WIDTH/2+' '+Config.SPACE_KEY_HEIGHT/2+' 0');\n  }\n\n  // ---------------------------------------------------------------------------\n  // SYMBOL KEY\n\n  else if (type === 'symbol') {\n    letter_el.setAttribute('scale', '0.12 0.12 0.12');\n  }\n\n  // ---------------------------------------------------------------------------\n  // ACTION KEY\n\n  if (type === 'backspace' || type === 'enter' || type === 'dismiss') {\n    el.setAttribute('width', Config.ACTION_WIDTH);\n    el.shadow_el.setAttribute('width', Config.ACTION_WIDTH*1.25);\n    el.shadow_el.setAttribute('position', Config.ACTION_WIDTH/2+' '+Config.KEY_WIDTH/2+' -0.02');\n  }\n\n  // ---------------------------------------------------------------------------\n  // SHIFT KEY\n\n  if (type === 'shift') {\n    var icon_el = document.createElement('a-image');\n    icon_el.setAttribute('data-type', 'icon');\n    icon_el.setAttribute('width', '0.032');\n    icon_el.setAttribute('height', '0.032');\n    icon_el.setAttribute('position', '0.04 0.04 0.01')\n    icon_el.setAttribute('src', '#aframeKeyboardShift');\n    el.appendChild(icon_el);\n    Draw.el.shiftKey = el;\n  }\n\n  // ---------------------------------------------------------------------------\n  // GLOBAL\n\n  else if (type === 'global') {\n    var icon_el = document.createElement('a-image');\n    icon_el.setAttribute('width', '0.032');\n    icon_el.setAttribute('height', '0.032');\n    icon_el.setAttribute('position', '0.04 0.04 0.01')\n    icon_el.setAttribute('src', '#aframeKeyboardGlobal');\n    el.appendChild(icon_el);\n  }\n\n  // ---------------------------------------------------------------------------\n  // BACKSPACE\n\n  else if (type === 'backspace') {\n    var icon_el = document.createElement('a-image');\n    icon_el.setAttribute('width', '0.046');\n    icon_el.setAttribute('height', '0.046');\n    icon_el.setAttribute('position', '0.07 0.04 0.01')\n    icon_el.setAttribute('src', '#aframeKeyboardBackspace');\n    el.appendChild(icon_el);\n  }\n\n  // ---------------------------------------------------------------------------\n  // ENTER\n\n  else if (type === 'enter') {\n    el.setAttribute('height', Config.ACTION_WIDTH);\n    el.shadow_el.setAttribute('height', Config.ACTION_WIDTH*1.25);\n    el.shadow_el.setAttribute('position', Config.ACTION_WIDTH/2+' '+Config.ACTION_WIDTH/2+' -0.02');\n\n    var circle_el = document.createElement('a-circle');\n    circle_el.setAttribute('color', '#4285f4');\n    circle_el.setAttribute('radius', 0.044);\n    circle_el.setAttribute('position', '0.07 0.07 0.01')\n    el.appendChild(circle_el);\n\n    var icon_el = document.createElement('a-image');\n    icon_el.setAttribute('width', '0.034');\n    icon_el.setAttribute('height', '0.034');\n    icon_el.setAttribute('position', '0.07 0.07 0.011')\n    icon_el.setAttribute('src', '#aframeKeyboardEnter');\n    el.appendChild(icon_el);\n  }\n\n  // ---------------------------------------------------------------------------\n  // DISMISS\n\n  else if (type === 'dismiss') {\n    var icon_el = document.createElement('a-image');\n    icon_el.setAttribute('width', '0.046');\n    icon_el.setAttribute('height', '0.046');\n    icon_el.setAttribute('position', '0.07 0.04 0.01')\n    icon_el.setAttribute('src', '#aframeKeyboardDismiss');\n    el.appendChild(icon_el);\n  }\n\n  return el;\n}\n\nmodule.exports = Draw;\n\n\n\n// WEBPACK FOOTER //\n// ./src/keyboard/draw.js","const Layouts = {\n  numerical: [\n    { type: 'text', value: '1'},\n    { type: 'text', value: '2'},\n    { type: 'text', value: '3'},\n    { type: 'text', value: '4'},\n    { type: 'text', value: '5'},\n    { type: 'text', value: '6'},\n    { type: 'text', value: '7'},\n    { type: 'text', value: '8'},\n    { type: 'text', value: '9'},\n    { type: 'text', value: '.'},\n    { type: 'text', value: '0'},\n    { type: 'text', value: '-'}\n  ],\n\n  alphabetical: [\n    { type: 'text', value: 'q'},\n    { type: 'text', value: 'w'},\n    { type: 'text', value: 'e'},\n    { type: 'text', value: 'r'},\n    { type: 'text', value: 't'},\n    { type: 'text', value: 'y'},\n    { type: 'text', value: 'u'},\n    { type: 'text', value: 'i'},\n    { type: 'text', value: 'o'},\n    { type: 'text', value: 'p'},\n\n    { type: 'text', value: 'a'},\n    { type: 'text', value: 's'},\n    { type: 'text', value: 'd'},\n    { type: 'text', value: 'f'},\n    { type: 'text', value: 'g'},\n    { type: 'text', value: 'h'},\n    { type: 'text', value: 'j'},\n    { type: 'text', value: 'k'},\n    { type: 'text', value: 'l'},\n\n    { type: 'shift'},\n    { type: 'text', value: 'z'},\n    { type: 'text', value: 'x'},\n    { type: 'text', value: 'c'},\n    { type: 'text', value: 'v'},\n    { type: 'text', value: 'b'},\n    { type: 'text', value: 'n'},\n    { type: 'text', value: 'm'},\n    { type: 'text', value: '!'},\n    { type: 'text', value: '?'},\n\n    { type: 'symbol', value: '#+='},\n    { type: 'text', value: '@'},\n    { type: 'spacebar', value: ''},\n    { type: 'text', value: ','},\n    { type: 'text', value: '.'}\n  ],\n\n  symbols: [\n    { type: 'text', value: '@'},\n    { type: 'text', value: '#'},\n    { type: 'text', value: '$'},\n    { type: 'text', value: '%'},\n    { type: 'text', value: '&'},\n    { type: 'text', value: '*'},\n    { type: 'text', value: '-'},\n    { type: 'text', value: '+'},\n    { type: 'text', value: '('},\n    { type: 'text', value: ')'},\n\n    { type: 'text', value: '~'},\n    { type: 'text', value: '`'},\n    { type: 'text', value: '\"'},\n    { type: 'text', value: '\\''},\n    { type: 'text', value: ':'},\n    { type: 'text', value: ';'},\n    { type: 'text', value: '_'},\n    { type: 'text', value: '='},\n    { type: 'text', value: '\\\\'},\n    { type: 'text', value: '/'},\n\n    { type: 'text', value: '{'},\n    { type: 'text', value: '}'},\n    { type: 'text', value: '['},\n    { type: 'text', value: ']'},\n    { type: 'text', value: '<'},\n    { type: 'text', value: '>'},\n    { type: 'text', value: '^'},\n    { type: 'text', value: '|'},\n    { type: 'text', value: '!'},\n    { type: 'text', value: '?'},\n\n    { type: 'symbol', value: 'ABC'},\n    { type: 'text', value: '@'},\n    { type: 'spacebar', value: ''},\n    { type: 'text', value: ','},\n    { type: 'text', value: '.'}\n  ],\n\n  actions: [\n    { type: 'backspace', value: 'Del'},\n    { type: 'enter', value: 'OK'},\n    { type: 'dismiss', value: 'W'},\n  ]\n}\n\nmodule.exports = Layouts;\n\n\n\n// WEBPACK FOOTER //\n// ./src/keyboard/layouts.js","const Config = {\n  KEYBOARD_COLOR: \"#263238\",\n  KEY_COLOR_HIGHLIGHT: \"#29363c\",\n  KEY_COLOR_ACTIVE: \"#404b50\",\n  SPACEBAR_COLOR_ACTIVE: \"#3c464b\",\n  SPACEBAR_COLOR_HIGHLIGHT: \"#445055\",\n  KEY_WIDTH: 0.08,\n  SPACE_KEY_WIDTH: 0.368,\n  SPACE_KEY_HEIGHT: 0.05,\n  ACTION_WIDTH: 0.140,\n}\n\nmodule.exports = Config;\n\n\n\n// WEBPACK FOOTER //\n// ./src/keyboard/config.js","const Config = require('./config');\nconst Utils = require('../utils');\nconst Event = require('../core/event');\nconst SFX = require('./sfx');\nconst Behaviors = {};\n\nBehaviors.el = null;\n\n// -----------------------------------------------------------------------------\n// KEYBOARD METHODS\n\nBehaviors.showKeyboard = function (el) {\n\n\tif (el.o_position) {\n\t\tel.setAttribute(\"position\", el.o_position);\n\t}\n\tel.isOpen = true;\n\tfor (let item of el.querySelectorAll('[data-ui]')) {\n\t\tfor (let child of item.children) {\n\t\t\tchild.setAttribute('show', true);\n\t\t}\n\t}\n\tlet parent = el.parentNode;\n\tif (parent) {\n\t\treturn;\n\t}\n\tel.sceneEl.appendChild(el);\n};\n\nBehaviors.hideKeyboard = function (el) {\n\tlet position = el.getAttribute(\"position\");\n\tif (position.x !== -10000) {\n\t\tel.o_position = position;\n\t}\n\tel.emit('keyboardIsClosed');\n\tel.isOpen = false;\n\tel.setAttribute(\"position\", \"-10000 -10000 -10000\");\n\tel.setAttribute('fadeout', {duration: 1});\n}\n\nBehaviors.destroyKeyboard = function (el) {\n\tlet parent = el.parentNode;\n\tif (!parent) {\n\t\treturn;\n\t}\n\tparent.removeChild(el);\n};\n\nBehaviors.openKeyboard = function (el) {\n\tif (el.o_position) {\n\t\tel.setAttribute(\"position\", el.o_position);\n\t}\n\tel.emit('keyboardIsOpen');\n\tel.isOpen = true;\n\tel._transitioning = true;\n\tlet parent = el.parentNode;\n\tif (!parent) {\n\t\tel.sceneEl.appendChild(el);\n\t}\n\tfor (let item of el.querySelectorAll('[data-ui]')) {\n\t\tfor (let child of item.children) {\n\t\t\tchild.setAttribute('hide', true);\n\t\t}\n\n\t\tfunction animationend() {\n\t\t\titem.children[0].removeEventListener('animationend', animationend);\n\t\t\tsetTimeout(function () {\n\t\t\t\titem.children[1].setAttribute('fadein', {duration: 160});\n\t\t\t\tEvent.emit(Behaviors.el, 'didopen');\n\t\t\t\tel._transitioning = false;\n\t\t\t}, 10)\n\t\t}\n\n\t\titem.children[0].setAttribute('fadein', {duration: 160});\n\t\titem.children[0].addEventListener('animationend', animationend)\n\t}\n};\n\nBehaviors.dismissKeyboard = function (el) {\n\tel._transitioning = true;\n\tfor (let item of el.querySelectorAll('[data-ui]')) {\n\t\tfor (let child of item.children) {\n\t\t\tchild.setAttribute('show', true);\n\t\t}\n\t\tel.isOpen = false;\n\n\t\tfunction animationend() {\n\t\t\titem.children[1].removeEventListener('animationend', animationend)\n\t\t\tsetTimeout(function () {\n\t\t\t\tfunction animationend() {\n\t\t\t\t\titem.children[0].removeEventListener('animationend', animationend);\n\t\t\t\t\tBehaviors.hideKeyboard(el);\n\t\t\t\t\tEvent.emit(Behaviors.el, 'diddismiss');\n\t\t\t\t\tel._transitioning = false;\n\t\t\t\t}\n\n\t\t\t\titem.children[0].setAttribute('fadeout', {duration: 160});\n\t\t\t\titem.children[0].addEventListener('animationend', animationend);\n\t\t\t}, 10)\n\t\t}\n\n\t\titem.children[1].setAttribute('fadeout', {duration: 160});\n\t\titem.children[1].addEventListener('animationend', animationend)\n\t}\n};\n\n// -----------------------------------------------------------------------------\n// KEY EVENTS\n\nBehaviors.addKeyEvents = (el) => {\n\tel.addEventListener('click', Behaviors.keyClick);\n\tel.addEventListener('mousedown', Behaviors.keyDown);\n\tel.addEventListener('mouseup', Behaviors.keyOut);\n\tel.addEventListener('mouseleave', Behaviors.keyOut);\n\tel.addEventListener('mouseenter', Behaviors.keyIn);\n\tel.addEventListener('raycaster-intersected', Behaviors.keyIn);\n\tel.addEventListener('raycaster-intersected-cleared', Behaviors.keyOut);\n\t//triggerdown\n\t// https://aframe.io/docs/0.6.0/components/hand-controls.html\n};\n\n// -----------------------------------------------------------------------------\n// KEYCLICK\n\nBehaviors.keyClick = function () {\n\t// SFX.keyDown(Behaviors.el);\n\n\tlet type = this.getAttribute('key-type');\n\tlet value = this.getAttribute('key-value');\n\n\tif (type === 'text' || type === 'spacebar') {\n\t\tif (type === 'spacebar') {\n\t\t\tvalue = ' ';\n\t\t}\n\t\tif (Behaviors.isShiftEnabled) {\n\t\t\tvalue = value.toUpperCase();\n\t\t\tBehaviors.shiftToggle();\n\t\t}\n\t\telse if (Behaviors.isSymbols) {\n\t\t\tBehaviors.symbolsToggle();\n\t\t}\n\t\tEvent.emit(Behaviors.el, 'input', value);\n\t}\n\telse if (type === 'shift') {\n\t\tBehaviors.shiftToggle();\n\t}\n\telse if (type === 'symbol') {\n\t\tBehaviors.symbolsToggle();\n\t}\n\telse if (type === 'backspace') {\n\t\tEvent.emit(Behaviors.el, 'backspace');\n\t}\n\telse if (type === 'enter') {\n\t\tEvent.emit(Behaviors.el, 'input', '\\n');\n\t\tEvent.emit(Behaviors.el, 'enter', '\\n');\n\t}\n\telse if (type === 'dismiss') {\n\t\tEvent.emit(Behaviors.el, 'dismiss');\n\t}\n}\n\n// -----------------------------------------------------------------------------\n// KEYDOWN\n\nBehaviors.keyDown = function () {\n\tif (Behaviors.el._transitioning) {\n\t\treturn;\n\t}\n\tthis.object3D.position.z = 0.003;\n\tif (this.getAttribute('key-type') === 'spacebar') {\n\t\tthis.setAttribute('color', Config.SPACEBAR_COLOR_ACTIVE);\n\t} else {\n\t\tthis.setAttribute('color', Config.KEY_COLOR_ACTIVE);\n\t}\n};\n\n// -----------------------------------------------------------------------------\n// KEYIN\n\nBehaviors.keyIn = function () {\n\tif (Behaviors.el._transitioning) {\n\t\treturn;\n\t}\n\tif (this.object3D.children[2] && this.object3D.children[2].material && !this.object3D.children[2].material.opacity) {\n\t\treturn\n\t}\n\tSFX.keyIn(Behaviors.el);\n\tif (this.getAttribute('key-type') === 'spacebar') {\n\t\tthis.setAttribute('color', Config.SPACEBAR_COLOR_HIGHLIGHT);\n\t} else {\n\t\tthis.setAttribute('color', Config.KEY_COLOR_HIGHLIGHT);\n\t}\n};\n\n// -----------------------------------------------------------------------------\n// KEYOUT\n\nBehaviors.keyOut = function () {\n\tthis.object3D.position.z = 0;\n\tif (this.getAttribute('key-type') === 'spacebar') {\n\t\tthis.setAttribute('color', Config.KEY_COLOR_ACTIVE);\n\t} else {\n\t\tthis.setAttribute('color', Config.KEYBOARD_COLOR);\n\t}\n}\n\n// -----------------------------------------------------------------------------\n// SHIFT\n\nBehaviors.isShiftEnabled = false;\nBehaviors.shiftToggle = function () {\n\tBehaviors.isShiftEnabled = !Behaviors.isShiftEnabled;\n\n\tvar icon_el = Behaviors.el.shiftKey.querySelector('[data-type]');\n\tif (Behaviors.isShiftEnabled) {\n\t\ticon_el.setAttribute('src', '#aframeKeyboardShiftActive');\n\t} else {\n\t\ticon_el.setAttribute('src', '#aframeKeyboardShift');\n\t}\n\n\tfor (let keyEl of document.querySelectorAll(\"[key-id]\")) {\n\t\tlet key_id = keyEl.getAttribute('key-id'), key_type = keyEl.getAttribute('key-type');\n\t\tif (key_id.startsWith('main-') && key_type === \"text\") {\n\t\t\tlet textEl = keyEl.querySelector('a-text');\n\t\t\tif (textEl) {\n\t\t\t\tlet value = textEl.getAttribute('value').toLowerCase();\n\t\t\t\tif (this.isShiftEnabled) {\n\t\t\t\t\tvalue = value.toUpperCase();\n\t\t\t\t}\n\t\t\t\ttextEl.setAttribute('value', value);\n\t\t\t}\n\t\t}\n\t}\n}\n\n// -----------------------------------------------------------------------------\n// SYMBOLS\n\nBehaviors.isSymbols = false;\nBehaviors.symbolsToggle = function () {\n\tBehaviors.isSymbols = !Behaviors.isSymbols;\n\tif (!Behaviors.isSymbols) {\n\t\tlet parent = Behaviors.el.symbolsLayout.parentNode;\n\t\tparent.removeChild(Behaviors.el.symbolsLayout);\n\t\tparent.appendChild(Behaviors.el.alphabeticalLayout);\n\t\tsetTimeout(function () {\n\t\t\tUtils.updateOpacity(Behaviors.el.alphabeticalLayout, 1);\n\t\t}, 0)\n\t} else {\n\t\tlet parent = Behaviors.el.alphabeticalLayout.parentNode;\n\t\tparent.removeChild(Behaviors.el.alphabeticalLayout);\n\t\tparent.appendChild(Behaviors.el.symbolsLayout);\n\t}\n}\n\n\nmodule.exports = Behaviors;\n\n\n\n// WEBPACK FOOTER //\n// ./src/keyboard/behaviors.js","const SFX = {\n\n  init: function(parent) {\n    let el = document.createElement('a-sound');\n    el.setAttribute('key', 'aframeKeyboardKeyInSound');\n    el.setAttribute('sfx', true);\n    el.setAttribute('src', '#aframeKeyboardKeyIn');\n    el.setAttribute('position', '0 2 5');\n    parent.appendChild(el);\n\n    el = document.createElement('a-sound');\n    el.setAttribute('key', 'aframeKeyboardKeyDownSound');\n    el.setAttribute('sfx', true);\n    el.setAttribute('src', '#aframeKeyboardKeyDown');\n    el.setAttribute('position', '0 2 5');\n    parent.appendChild(el);\n  },\n\n  keyIn: function(parent) {\n    let el = parent.querySelector('[key=aframeKeyboardKeyInSound]');\n    if (!el) { return; }\n    el.components.sound.stopSound();\n    el.components.sound.playSound();\n  },\n\n  keyDown: function(parent) {\n    let el = parent.querySelector('[key=aframeKeyboardKeyDownSound]');\n    if (!el) { return; }\n    el.components.sound.stopSound();\n    el.components.sound.playSound();\n  }\n}\n\nmodule.exports = SFX;\n\n\n\n// WEBPACK FOOTER //\n// ./src/keyboard/sfx.js","const Utils = require('../utils');\nconst Event = require('../core/event');\n\n/*\n@BUG: Space has not effect when no letter comes after.\n@TODO: <progress value=\"70\" max=\"100\">70 %</progress>\n*/\n\nAFRAME.registerComponent('input', {\n  schema: {\n    value: { type: \"string\", default: \"\" },\n    name: { type: \"string\", default: \"\" },\n    disabled: { type: \"boolean\", default: false },\n    color: { type: \"color\", default: \"#000\" },\n    align: { type: \"string\", default: \"left\" },\n    font: { type: \"string\", default: \"\" },\n    letterSpacing: { type: \"int\", default: 0 },\n    lineHeight: { type: \"string\", default: \"\" },\n    opacity: { type: \"number\", default: 1 },\n    side: { type: \"string\", default: 'front' },\n    tabSize: { type: \"int\", default: 4 },\n    placeholder: { type: \"string\", default: \"\" },\n    placeholderColor: { type: \"color\", default: \"#AAA\" },\n    maxLength: { type: \"int\", default: 0 },\n    type: { type: \"string\", default: \"text\" },\n    width: { type: \"number\", default: 1 },\n    cursorWidth: { type: \"number\", default: 0.01 },\n    cursorHeight: { type: \"number\", default: 0.08 },\n    cursorColor: { type: \"color\", default: \"#007AFF\" },\n    backgroundColor: { type: \"color\", default: \"#FFF\" },\n    backgroundOpacity: { type: \"number\", default: 1 },\n  },\n\n  init: function () {\n    let that = this;\n\n    this.background = document.createElement('a-rounded');\n    this.background.setAttribute('radius', 0.01)\n    this.background.setAttribute('height', 0.18)\n    this.background.setAttribute('side', 'double')\n    this.el.appendChild(this.background);\n\n    this.cursor = document.createElement('a-plane');\n    this.cursor.setAttribute('position', '0 0 0.003');\n    this.cursor.setAttribute('visible', false);\n    this.el.appendChild(this.cursor);\n\n    this.text = document.createElement('a-entity');\n    this.el.appendChild(this.text);\n\n    this.placeholder = document.createElement('a-entity');\n    this.placeholder.setAttribute('visible', false);\n    this.el.appendChild(this.placeholder);\n\n    this.el.focus = this.focus.bind(this);\n    this.el.blur = this.blur.bind(this);\n    this.el.appendString = this.appendString.bind(this);\n    this.el.deleteLast = this.deleteLast.bind(this);\n\n    //setTimeout(function() { that.updateText(); }, 0);\n    this.blink();\n\n    this.el.addEventListener('click', function() {\n      if (this.components.input.data.disabled) { return; }\n      that.focus();\n    });\n\n    Object.defineProperty(this.el, 'value', {\n      get: function() { return this.getAttribute('value'); },\n      set: function(value) { this.setAttribute('value', value); },\n      enumerable: true,\n      configurable: true\n    });\n  },\n  blink: function() {\n    let that = this;\n    if (!this.isFocused) {\n      that.cursor.setAttribute('visible', false);\n      clearInterval(this.cursorInterval);\n      this.cursorInterval = null;\n      return\n    }\n    this.cursorInterval = setInterval(function(){\n      that.cursor.setAttribute('visible', !that.cursor.getAttribute('visible'));\n    }, 500);\n  },\n  isFocused: false,\n  focus: function(noemit) {\n    if (this.isFocused) { return; }\n    this.isFocused = true;\n    this.cursor.setAttribute('visible', true);\n    this.blink();\n    Event.emit(this.el, 'focus');\n    if (!noemit) { Event.emit(document.body, 'didfocusinput', this.el); }\n  },\n  blur: function(noemit) {\n    if (!this.isFocused) { return; }\n    this.isFocused = false;\n    if (this.cursorInterval) {\n      clearInterval(this.cursorInterval);\n      this.cursorInterval = null;\n    }\n    this.cursor.setAttribute('visible', false);\n    Event.emit(this.el, 'blur');\n    if (!noemit) { Event.emit(document.body, 'didblurinput', this.el); }\n  },\n  appendString: function(data) {\n    if(data === '\\n') {\n      return this.blur();\n    }\n    let str = this.el.getAttribute(\"value\");\n    if (!str) { str = \"\" }\n    str = str+data;\n    this.el.setAttribute(\"value\", str)\n    Event.emit(this.el, 'change', str);\n  },\n  deleteLast: function() {\n    let str = this.el.getAttribute(\"value\");\n    if (!str) { str = \"\" }\n    str = str.slice(0, -1);\n    this.el.setAttribute(\"value\", str)\n    Event.emit(this.el, 'change', str);\n  },\n  updateText: function() {\n    let that = this;\n    let padding = {\n      left: 0.021,\n      right: 0.021\n    };\n\n    let props = {\n      color: this.data.color,\n      align: this.data.align,\n      side: this.data.side,\n      tabSize: this.data.tabSize,\n      wrapCount: 24*this.data.width,\n      width: this.data.width\n    }\n\n    // Make cursor stop blinking when typing..\n    // (and blinking again after typing stop).\n    let attr = this.text.getAttribute(\"text\");\n    if (attr) {\n      if (this.data.value !== attr.value) {\n        if (this.cursorInterval) {\n          clearInterval(this.cursorInterval);\n          this.cursorInterval = null;\n        }\n        if (this.cursorTimer) {\n          clearTimeout(this.cursorTimer);\n          this.cursorTimer = null;\n        }\n        this.cursor.setAttribute('visible', true);\n        this.cursorTimer = setTimeout(function(){\n          that.blink();\n        }, 50);\n      }\n    }\n\n    // Max length\n    if (this.data.maxLength) {\n      props.value = this.data.value.substring(0, this.data.maxLength);\n      this.el.setAttribute('value', props.value)\n    } else {\n      props.value = this.data.value;\n    }\n\n    if (this.data.type === \"password\") {\n      props.value = \"*\".repeat(this.data.value.length);\n    }\n\n    if (this.data.font.length) { props.font = this.data.font }\n    if (this.data.letterSpacing) { props.letterSpacing = this.data.letterSpacing; }\n    if (this.data.lineHeight.length) { props.lineHeight = this.data.lineHeight; }\n    this.text.setAttribute('visible', false);\n    this.text.setAttribute(\"text\", props);\n\n    function getTextWidth(el, data, trimFirst, _widthFactor) {\n      if (!el.object3D || !el.object3D.children || !el.object3D.children[0]) { return 0; }\n      let v = el.object3D.children[0].geometry.visibleGlyphs;\n      if (!v) { return 0; }\n      v = v[v.length-1];\n      if (!v) { return 0; }\n      if (v.line) {\n        if (trimFirst) {\n          data.value = data.value.substr(1);\n        } else {\n          data.value = data.value.slice(0, -1);\n        }\n        el.setAttribute(\"text\", data);\n        return getTextWidth(el, data, trimFirst);\n      } else {\n        if (!_widthFactor) { _widthFactor = Utils.getWidthFactor(el, data.wrapCount); }\n        v = (v.position[0] + v.data.width) / (_widthFactor/that.data.width);\n        let textRatio = (v+padding.left+padding.right) / that.data.width;\n\n        if (textRatio > 1) {\n          if (trimFirst) {\n            data.value = data.value.substr(1);\n          } else {\n            data.value = data.value.slice(0, -1);\n          }\n          el.setAttribute(\"text\", data);\n          return getTextWidth(el, data, trimFirst, _widthFactor);\n        }\n      }\n      return v;\n    }\n\n\n    if (props.value.length) {\n      this.placeholder.setAttribute('visible', false);\n    } else {\n      this.placeholder.setAttribute('visible', true);\n    }\n\n    let placeholder_props = Utils.clone(props);\n    placeholder_props.value = this.data.placeholder;\n    placeholder_props.color = this.data.placeholderColor;\n    this.placeholder.setAttribute(\"text\", placeholder_props);\n\n    setTimeout(function() {\n      if (that.text.object3D) {\n        let children = that.text.object3D.children;\n        if (children[0] && children[0].geometry && children[0].geometry.visibleGlyphs) {\n          let v = 0;\n          if (children[0].geometry.visibleGlyphs.length) {\n            v = getTextWidth(that.text, props, true);\n            that.text.setAttribute('visible', true);\n          }\n          that.cursor.setAttribute('position', v+padding.left+' 0 0.003');\n        } else {\n          that.cursor.setAttribute('position', padding.left+' 0 0.003');\n        }\n      } else {  that.cursor.setAttribute('position', padding.left+' 0 0.003'); }\n      getTextWidth(that.placeholder, placeholder_props);\n    }, 0)\n\n    this.background.setAttribute('color', this.data.backgroundColor)\n    /*if (this.data.backgroundOpacity) {\n      setTimeout(function() {\n        Utils.updateOpacity(that.background, that.data.backgroundOpacity);\n      }, 0);\n    }*/\n    this.background.setAttribute('width', this.data.width);\n    //this.background.setAttribute('position', this.data.width/2+' 0 0');\n    this.background.setAttribute('position', '0 -0.09 0.001');\n    this.text.setAttribute('position', padding.left-0.001+this.data.width/2+' 0 0.002');\n    this.placeholder.setAttribute('position', padding.left-0.001+this.data.width/2+' 0 0.002');\n  },\n  updateCursor: function() {\n    this.cursor.setAttribute('width', this.data.cursorWidth)\n    this.cursor.setAttribute('height', this.data.cursorHeight)\n    this.cursor.setAttribute('color', this.data.cursorColor);\n  },\n  update: function () {\n    let that = this;\n    setTimeout(function() {\n    //  Utils.updateOpacity(that.el, that.data.opacity);\n    }, 0)\n\n    this.updateCursor();\n    this.updateText();\n  },\n  tick: function () {},\n  remove: function () {},\n  pause: function () {},\n  play: function () {}\n});\n\nAFRAME.registerPrimitive('a-input', {\n  defaultComponents: {\n    input: {}\n  },\n  mappings: {\n    value: 'input.value',\n    name: 'input.name',\n    disabled: 'input.disabled',\n    color: 'input.color',\n    align: 'input.align',\n    font: 'input.font',\n    'letter-spacing': 'input.letterSpacing',\n    'line-height': 'input.lineHeight',\n    'opacity': 'input.opacity',\n    'side': 'input.side',\n    'tab-size': 'input.tabSize',\n    placeholder: 'input.placeholder',\n    'placeholder-color': 'input.placeholderColor',\n    'max-length': 'input.maxLength',\n    type: 'input.type',\n    width: 'input.width',\n    'cursor-width': \"input.cursorWidth\",\n    'cursor-height': \"input.cursorHeight\",\n    'cursor-color': \"input.cursorColor\",\n    'background-color': 'input.backgroundColor',\n    'background-opacity': 'input.backgroundOpacity'\n  }\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/input/index.js","const Utils = require('../utils');\nconst Event = require('../core/event');\nconst Assets = require('./assets');\nconst SFX = require('./sfx');\n\nAFRAME.registerComponent('button', {\n  schema: {\n    disabled: { type: 'boolean', default: false },\n    type: { type: \"string\", default: \"raised\" },\n    name: { type: \"string\", default: \"\" },\n    value: { type: \"string\", default: \"Button\" },\n    buttonColor: { type: \"color\", default: \"#4076fd\"},\n    color: { type: \"color\", default: \"#FFF\" },\n    font: { type: \"string\", default: \"\" },\n    letterSpacing: { type: \"int\", default: 0 },\n    lineHeight: { type: \"string\", default: \"\" },\n    opacity: { type: \"number\", default: 1 },\n    width: { type: \"number\", default: 1 }\n  },\n  init: function () {\n    var that = this;\n\n    // Assets\n    Utils.preloadAssets( Assets );\n\n    // SFX\n    SFX.init(this.el);\n\n    this.wrapper = document.createElement('a-entity');\n    this.wrapper.setAttribute('position', '0 0 0.01')\n    this.el.appendChild(this.wrapper);\n\n    this.shadow = document.createElement('a-image');\n    this.shadow.setAttribute('height', 0.36*1.25);\n    this.shadow.setAttribute('src', '#aframeButtonShadow');\n    this.wrapper.appendChild(this.shadow);\n\n    // OUTLINE\n    this.outline = document.createElement('a-rounded');\n    this.outline.setAttribute('height', 0.36);\n    this.outline.setAttribute('radius', 0.03);\n    this.outline.setAttribute('position', `0 -${0.36/2} 0.01`);\n    this.wrapper.appendChild(this.outline);\n\n    // LABEL\n    this.label = document.createElement('a-entity');\n    this.outline.appendChild(this.label);\n\n    // EVENTS\n    this.el.addEventListener('click', function() {\n      if (this.components.button && this.components.button.data.disabled) { return; }\n      that.onClick();\n    });\n    this.el.addEventListener('mousedown', function() {\n      if (this.components.button && this.components.button.data.disabled) {\n        return SFX.clickDisabled(this);\n      }\n      that.wrapper.setAttribute('position', `0 0 0.036`);\n      SFX.click(this);\n    });\n    this.el.addEventListener('mouseup', function() {\n      if (this.components.button && this.components.button.data.disabled) { return; }\n      that.wrapper.setAttribute('position', `0 0 0`);\n    });\n\n    this.el.getWidth = this.getWidth.bind(this);\n    Object.defineProperty(this.el, 'value', {\n      get: function() { return this.getAttribute('value'); },\n      set: function(value) { this.setAttribute('value', value); },\n      enumerable: true,\n      configurable: true\n    });\n  },\n  onClick: function() {\n    //Event.emit(this.el, 'click');\n  },\n  getWidth: function() {\n    return this.__width;\n  },\n  update: function () {\n    var that = this;\n    this.outline.setAttribute('color', this.data.buttonColor);\n\n    let props = {\n      color: this.data.color,\n      align: 'center',\n      wrapCount: 10*this.data.width,\n      width: this.data.width,\n    }\n    if (this.data.font) { props.font = this.data.font; }\n\n    if (this.data.type === \"flat\") {\n      props.color = this.data.buttonColor;\n    }\n\n    // TITLE\n    props.value = this.data.value.toUpperCase();\n    this.label.setAttribute('text', props);\n    this.label.setAttribute('position', this.data.width/2+0.24+' 0 0.01');\n\n    // TRIM TEXT IF NEEDED.. @TODO: optimize this mess..\n    function getTextWidth(el, callback, _widthFactor) {\n      if (!el.object3D || !el.object3D.children || !el.object3D.children[0]) {\n        return setTimeout(function() {\n          getTextWidth(el, callback);\n        }, 10);\n       }\n      let v = el.object3D.children[0].geometry.visibleGlyphs;\n      if (!v) {\n        return setTimeout(function() {\n          getTextWidth(el, callback);\n        }, 10);\n      }\n      v = v[v.length-1];\n      if (!v) { return callback(0); }\n      if (v.line) {\n        props.value = props.value.slice(0, -1);\n        el.setAttribute(\"text\", props);\n        return getTextWidth(el, callback);\n      } else {\n        if (!_widthFactor) { _widthFactor = Utils.getWidthFactor(el, props.wrapCount); }\n        v = (v.position[0] + v.data.width ) / (_widthFactor/that.data.width);\n        let textRatio = v / that.data.width;\n        if (textRatio > 1) {\n          props.value = props.value.slice(0, -1);\n          el.setAttribute(\"text\", props);\n          return getTextWidth(el, callback, _widthFactor);\n        }\n      }\n      return callback(v);\n    }\n    setTimeout(function() {\n      if (that.data.value.length) {\n        getTextWidth(that.label, (width)=>{\n          that.label.setAttribute('position', `${width/2+0.28/2} ${0.36/2} 0.02`);//\n          width = width+0.28;\n          that.outline.setAttribute('width', width);\n          that.__width = width;\n          that.shadow.setAttribute('width', width*1.17);\n          that.shadow.setAttribute('position', width/2+' 0 0');\n          Event.emit(that.el, 'change:width', width)\n        });\n      }\n\n      if (that.data.disabled) {\n        that.shadow.setAttribute('visible', false);\n        let timer = setInterval(function() {\n          if (that.label.object3D.children[0] && that.label.object3D.children[0].geometry.visibleGlyphs) {\n            clearInterval(timer);\n            Utils.updateOpacity(that.el, 0.4);\n          }\n        }, 10)\n      } else {\n        let timer = setInterval(function() {\n          if (that.label.object3D.children[0] && that.label.object3D.children[0].geometry.visibleGlyphs) {\n            clearInterval(timer);\n            Utils.updateOpacity(that.el, 1);\n          }\n        }, 10)\n      }\n\n      if (that.data.type === \"flat\") {\n        that.shadow.setAttribute('visible', false);\n        let timer = setInterval(function() {\n          if (that.label.object3D.children[0] && that.label.object3D.children[0].geometry.visibleGlyphs) {\n            clearInterval(timer);\n            Utils.updateOpacity(that.outline, 0);\n            if (that.data.disabled) {\n              Utils.updateOpacity(that.label, 0.4);\n            }\n          }\n        }, 10)\n      }\n    }, 0);\n  },\n  tick: function () {},\n  remove: function () {},\n  pause: function () {},\n  play: function () {}\n});\n\nAFRAME.registerPrimitive('a-button', {\n  defaultComponents: {\n    button: {}\n  },\n  mappings: {\n    disabled: 'button.disabled',\n    type: 'button.type',\n    name: 'button.name',\n    value: 'button.value',\n    'button-color': 'button.buttonColor',\n    color: 'button.color',\n    font: 'button.font',\n    'letter-spacing': 'button.letterSpacing',\n    'line-height': 'button.lineHeight',\n    'opacity': 'button.opacity',\n    'width': 'button.width'\n  }\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/button/index.js","module.exports = [\n  { type: 'img', id: 'aframeButtonShadow', src: `${AFRAME.ASSETS_PATH}/images/ButtonShadow.png`},\n  { type: 'audio', id: 'aframeButtonClick', src: `${AFRAME.ASSETS_PATH}/sounds/ButtonClick.mp3`},\n  { type: 'audio', id: 'aframeButtonClickDisabled', src: `${AFRAME.ASSETS_PATH}/sounds/ButtonClickDisabled.mp3`}\n]\n\n\n\n// WEBPACK FOOTER //\n// ./src/button/assets.js","const SFX = {\n\n  init: function(parent) {\n    let el = document.createElement('a-sound');\n    el.setAttribute('key', 'aframeButtonClickSound');\n    el.setAttribute('sfx', true);\n    el.setAttribute('src', '#aframeButtonClick');\n    el.setAttribute('position', '0 2 5');\n    parent.appendChild(el);\n\n    el = document.createElement('a-sound');\n    el.setAttribute('key', 'aframeButtonClickDisabledSound');\n    el.setAttribute('sfx', true);\n    el.setAttribute('src', '#aframeButtonClickDisabled');\n    el.setAttribute('position', '0 2 5');\n    parent.appendChild(el);\n  },\n\n  click: function(parent) {\n    let el = parent.querySelector('[key=aframeButtonClickSound]');\n    if (!el) { return; }\n    el.components.sound.stopSound();\n    el.components.sound.playSound();\n  },\n\n  clickDisabled: function(parent) {\n    let el = parent.querySelector('[key=aframeButtonClickDisabledSound]');\n    if (!el) { return; }\n    el.components.sound.stopSound();\n    el.components.sound.playSound();\n  }\n}\n\nmodule.exports = SFX;\n\n\n\n// WEBPACK FOOTER //\n// ./src/button/sfx.js"],"sourceRoot":""}